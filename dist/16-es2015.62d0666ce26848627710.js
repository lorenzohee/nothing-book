(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"n1/D":function(n,t,e){"use strict";e.r(t);var l=e("8Y7J");class r{}var o=e("pMnS"),u=e("MKJQ"),i=e("sZkV"),a=e("s7LF"),s=e("iInd"),c=e("SVse");class h{}var f=e("aOlj"),b=e("HDdC"),d=e("IheW");let p=(()=>{class n{constructor(n){this.baseService=n}getBookList(n){return this.baseService.get({url:"api/books",params:n})}getBookById(n){return n?this.baseService.get({url:`api/books/${n}`}):new b.a}getBookContentById(n){let t=(new d.i).set("page",n.page||1);return t=t.set("id",n.id),t=t.set("pageNum",n.pageNum||2e3),n.id?this.baseService.get({url:`api/books/${n.id}/content`,params:t}):new b.a}createBook(n){return this.baseService.post({url:"api/books",form:n})}updateBook(n,t){return this.baseService.put({url:`api/books/${t}`,form:n})}deleteBookById(n){return this.baseService.delete({url:`api/books/${n}`})}postBannerFile(n){return this.baseService.postImageFile(n)}}return n.ngInjectableDef=l.Ob({factory:function(){return new n(l.Pb(f.a))},token:n,providedIn:"root"}),n})();var g=Object.keys,v=Array.isArray,m="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function y(n,t){return"object"!=typeof t?n:(g(t).forEach((function(e){n[e]=t[e]})),n)}var k=Object.getPrototypeOf,w={}.hasOwnProperty;function x(n,t){return w.call(n,t)}function _(n,t){"function"==typeof t&&(t=t(k(n))),g(t).forEach((function(e){C(n,e,t[e])}))}var B=Object.defineProperty;function C(n,t,e,l){B(n,t,y(e&&x(e,"get")&&"function"==typeof e.get?{get:e.get,set:e.set,configurable:!0}:{value:e,configurable:!0,writable:!0},l))}function I(n){return{from:function(t){return n.prototype=Object.create(t.prototype),C(n.prototype,"constructor",n),{extend:_.bind(null,n.prototype)}}}}var P=Object.getOwnPropertyDescriptor,S=[].slice;function j(n,t,e){return S.call(n,t,e)}function F(n,t){return t(n)}function E(n){if(!n)throw new Error("Assertion Failed")}function O(n){m.setImmediate?setImmediate(n):setTimeout(n,0)}function T(n,t){return n.reduce((function(n,e,l){var r=t(e,l);return r&&(n[r[0]]=r[1]),n}),{})}function D(n,t,e){try{n.apply(null,e)}catch(l){t&&t(l)}}function A(n,t){if(x(n,t))return n[t];if(!t)return n;if("string"!=typeof t){for(var e=[],l=0,r=t.length;l<r;++l){var o=A(n,t[l]);e.push(o)}return e}var u=t.indexOf(".");if(-1!==u){var i=n[t.substr(0,u)];return void 0===i?void 0:A(i,t.substr(u+1))}}function K(n,t,e){if(n&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(n)))if("string"!=typeof t&&"length"in t){E("string"!=typeof e&&"length"in e);for(var l=0,r=t.length;l<r;++l)K(n,t[l],e[l])}else{var o=t.indexOf(".");if(-1!==o){var u=t.substr(0,o),i=t.substr(o+1);if(""===i)void 0===e?delete n[u]:n[u]=e;else{var a=n[u];a||(a=n[u]={}),K(a,i,e)}}else void 0===e?delete n[t]:n[t]=e}}function q(n){var t={};for(var e in n)x(n,e)&&(t[e]=n[e]);return t}var z=[].concat;function M(n){return z.apply([],n)}var N="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(M([8,16,32,64].map((function(n){return["Int","Uint","Float"].map((function(t){return t+n+"Array"}))})))).filter((function(n){return m[n]})).map((function(n){return m[n]}));function L(n){if(!n||"object"!=typeof n)return n;var t;if(v(n)){t=[];for(var e=0,l=n.length;e<l;++e)t.push(L(n[e]))}else if(N.indexOf(n.constructor)>=0)t=n;else for(var r in t=n.constructor?Object.create(n.constructor.prototype):{},n)x(n,r)&&(t[r]=L(n[r]));return t}function H(n,t,e,l){return e=e||{},l=l||"",g(n).forEach((function(r){if(x(t,r)){var o=n[r],u=t[r];"object"==typeof o&&"object"==typeof u&&o&&u&&""+o.constructor==""+u.constructor?H(o,u,e,l+r+"."):o!==u&&(e[l+r]=t[r])}else e[l+r]=void 0})),g(t).forEach((function(r){x(n,r)||(e[l+r]=t[r])})),e}var R="undefined"!=typeof Symbol&&Symbol.iterator,U=R?function(n){var t;return null!=n&&(t=n[R])&&t.apply(n)}:function(){return null},V={};function W(n){var t,e,l,r;if(1===arguments.length){if(v(n))return n.slice();if(this===V&&"string"==typeof n)return[n];if(r=U(n)){for(e=[];!(l=r.next()).done;)e.push(l.value);return e}if(null==n)return[n];if("number"==typeof(t=n.length)){for(e=new Array(t);t--;)e[t]=n[t];return e}return[n]}for(t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return e}var J="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $(n,t){J=n,G=t}var G=function(){return!0},Q=!new Error("").stack;function Y(){if(Q)try{throw new Error}catch(n){return n}return new Error}function Z(n,t){var e=n.stack;return e?(t=t||0,0===e.indexOf(n.name)&&(t+=(n.name+n.message).split("\n").length),e.split("\n").slice(t).filter(G).map((function(n){return"\n"+n})).join("")):""}var X=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(X),tn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function en(n,t){this._e=Y(),this.name=n,this.message=t}function ln(n,t,e,l){this._e=Y(),this.failures=t,this.failedKeys=l,this.successCount=e}function rn(n,t){this._e=Y(),this.name="BulkError",this.failures=t,this.message=function(n,t){return n+". Errors: "+t.map((function(n){return n.toString()})).filter((function(n,t,e){return e.indexOf(n)===t})).join("\n")}(n,t)}I(en).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Z(this._e,2))}},toString:function(){return this.name+": "+this.message}}),I(ln).from(en),I(rn).from(en);var on=nn.reduce((function(n,t){return n[t]=t+"Error",n}),{}),un=en,an=nn.reduce((function(n,t){var e=t+"Error";function l(n,l){this._e=Y(),this.name=e,n?"string"==typeof n?(this.message=n,this.inner=l||null):"object"==typeof n&&(this.message=n.name+" "+n.message,this.inner=n):(this.message=tn[t]||e,this.inner=null)}return I(l).from(un),n[t]=l,n}),{});an.Syntax=SyntaxError,an.Type=TypeError,an.Range=RangeError;var sn=X.reduce((function(n,t){return n[t+"Error"]=an[t],n}),{}),cn=nn.reduce((function(n,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(n[t+"Error"]=an[t]),n}),{});function hn(){}function fn(n){return n}function bn(n,t){return null==n||n===fn?t:function(e){return t(n(e))}}function dn(n,t){return function(){n.apply(this,arguments),t.apply(this,arguments)}}function pn(n,t){return n===hn?t:function(){var e=n.apply(this,arguments);void 0!==e&&(arguments[0]=e);var l=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?dn(l,this.onsuccess):l),r&&(this.onerror=this.onerror?dn(r,this.onerror):r),void 0!==o?o:e}}function gn(n,t){return n===hn?t:function(){n.apply(this,arguments);var e=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?dn(e,this.onsuccess):e),l&&(this.onerror=this.onerror?dn(l,this.onerror):l)}}function vn(n,t){return n===hn?t:function(e){var l=n.apply(this,arguments);y(e,l);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?dn(r,this.onsuccess):r),o&&(this.onerror=this.onerror?dn(o,this.onerror):o),void 0===l?void 0===u?void 0:u:y(l,u)}}function mn(n,t){return n===hn?t:function(){return!1!==t.apply(this,arguments)&&n.apply(this,arguments)}}function yn(n,t){return n===hn?t:function(){var e=n.apply(this,arguments);if(e&&"function"==typeof e.then){for(var l=this,r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return e.then((function(){return t.apply(l,o)}))}return t.apply(this,arguments)}}cn.ModifyError=ln,cn.DexieError=en,cn.BulkError=rn;var kn={},wn=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var n=m.Promise;return n?[n.resolve(),n.prototype,n.resolve()]:[]}}(),xn=wn[0],_n=wn[1],Bn=wn[2],Cn=_n&&_n.then,In=xn&&xn.constructor,Pn=wn[3],Sn=!!Bn,jn=!1,Fn=Bn?function(){Bn.then(Zn)}:m.setImmediate?setImmediate.bind(null,Zn):m.MutationObserver?function(){var n=document.createElement("div");new MutationObserver((function(){Zn(),n=null})).observe(n,{attributes:!0}),n.setAttribute("i","1")}:function(){setTimeout(Zn,0)},En=function(n,t){Nn.push([n,t]),Tn&&(Fn(),Tn=!1)},On=!0,Tn=!0,Dn=[],An=[],Kn=null,qn=fn,zn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:wt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(n){try{wt(n[0],n[1])}catch(t){}}))}},Mn=zn,Nn=[],Ln=0,Hn=[];function Rn(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=hn,this._lib=!1;var t=this._PSD=Mn;if(J&&(this._stackHolder=Y(),this._prev=null,this._numPrev=0),"function"!=typeof n){if(n!==kn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Jn(this,this._value))}this._state=null,this._value=null,++t.ref,Wn(this,n)}var Un={get:function(){var n=Mn,t=at;function e(e,l){var r=this,o=!n.global&&(n!==Mn||t!==at);o&&ft();var u=new Rn((function(t,u){Gn(r,new Vn(yt(e,n,o),yt(l,n,o),t,u,n))}));return J&&Yn(u,this),u}return e.prototype=kn,e},set:function(n){C(this,"then",n&&n.prototype===kn?Un:{get:function(){return n},set:Un.set})}};function Vn(n,t,e,l,r){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=l,this.psd=r}function Wn(n,t){try{t((function(t){if(null===n._state){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var e=n._lib&&Xn();t&&"function"==typeof t.then?Wn(n,(function(n,e){t instanceof Rn?t._then(n,e):t.then(n,e)})):(n._state=!0,n._value=t,$n(n)),e&&nt()}}),Jn.bind(null,n))}catch(e){Jn(n,e)}}function Jn(n,t){if(An.push(t),null===n._state){var e=n._lib&&Xn();t=qn(t),n._state=!1,n._value=t,J&&null!==t&&"object"==typeof t&&!t._promise&&D((function(){var e=function n(t,e){var l;return P(t,e)||(l=k(t))&&n(l,e)}(t,"stack");t._promise=n,C(t,"stack",{get:function(){return jn?e&&(e.get?e.get.apply(t):e.value):n.stack}})})),function(n){Dn.some((function(t){return t._value===n._value}))||Dn.push(n)}(n),$n(n),e&&nt()}}function $n(n){var t=n._listeners;n._listeners=[];for(var e=0,l=t.length;e<l;++e)Gn(n,t[e]);var r=n._PSD;--r.ref||r.finalize(),0===Ln&&(++Ln,En((function(){0==--Ln&&tt()}),[]))}function Gn(n,t){if(null!==n._state){var e=n._state?t.onFulfilled:t.onRejected;if(null===e)return(n._state?t.resolve:t.reject)(n._value);++t.psd.ref,++Ln,En(Qn,[e,n,t])}else n._listeners.push(t)}function Qn(n,t,e){try{Kn=t;var l,r=t._value;t._state?l=n(r):(An.length&&(An=[]),l=n(r),-1===An.indexOf(r)&&function(n){for(var t=Dn.length;t;)if(Dn[--t]._value===n._value)return void Dn.splice(t,1)}(t)),e.resolve(l)}catch(o){e.reject(o)}finally{Kn=null,0==--Ln&&tt(),--e.psd.ref||e.psd.finalize()}}function Yn(n,t){var e=t?t._numPrev+1:0;e<100&&(n._prev=t,n._numPrev=e)}function Zn(){Xn()&&nt()}function Xn(){var n=On;return On=!1,Tn=!1,n}function nt(){var n,t,e;do{for(;Nn.length>0;)for(n=Nn,Nn=[],e=n.length,t=0;t<e;++t){var l=n[t];l[0].apply(null,l[1])}}while(Nn.length>0);On=!0,Tn=!0}function tt(){var n=Dn;Dn=[],n.forEach((function(n){n._PSD.onunhandled.call(null,n._value,n)}));for(var t=Hn.slice(0),e=t.length;e;)t[--e]()}function et(n){return new Rn(kn,!1,n)}function lt(n,t){var e=Mn;return function(){var l=Xn(),r=Mn;try{return gt(e,!0),n.apply(this,arguments)}catch(o){t&&t(o)}finally{gt(r,!1),l&&nt()}}}_(Rn.prototype,{then:Un,_then:function(n,t){Gn(this,new Vn(null,null,n,t,Mn))},catch:function(n){if(1===arguments.length)return this.then(null,n);var t=arguments[0],e=arguments[1];return this.then(null,"function"==typeof t?function(n){return n instanceof t?e(n):et(n)}:function(n){return n&&n.name===t?e(n):et(n)})},finally:function(n){return this.then((function(t){return n(),t}),(function(t){return n(),et(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{jn=!0;var n=function n(t,e,l){if(e.length===l)return e;var r="";if(!1===t._state){var o,u,i=t._value;null!=i?(o=i.name||"Error",u=i.message||i,r=Z(i,0)):(o=i,u=""),e.push(o+(u?": "+u:"")+r)}return J&&((r=Z(t._stackHolder,2))&&-1===e.indexOf(r)&&e.push(r),t._prev&&n(t._prev,e,l)),e}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{jn=!1}}},timeout:function(n,t){var e=this;return n<1/0?new Rn((function(l,r){var o=setTimeout((function(){return r(new an.Timeout(t))}),n);e.then(l,r).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&C(Rn.prototype,Symbol.toStringTag,"Promise"),zn.env=vt(),_(Rn,{all:function(){var n=W.apply(null,arguments).map(bt);return new Rn((function(t,e){0===n.length&&t([]);var l=n.length;n.forEach((function(r,o){return Rn.resolve(r).then((function(e){n[o]=e,--l||t(n)}),e)}))}))},resolve:function(n){if(n instanceof Rn)return n;if(n&&"function"==typeof n.then)return new Rn((function(t,e){n.then(t,e)}));var t=new Rn(kn,!0,n);return Yn(t,Kn),t},reject:et,race:function(){var n=W.apply(null,arguments).map(bt);return new Rn((function(t,e){n.map((function(n){return Rn.resolve(n).then(t,e)}))}))},PSD:{get:function(){return Mn},set:function(n){return Mn=n}},newPSD:ct,usePSD:mt,scheduler:{get:function(){return En},set:function(n){En=n}},rejectionMapper:{get:function(){return qn},set:function(n){qn=n}},follow:function(n,t){return new Rn((function(e,l){return ct((function(t,e){var l=Mn;l.unhandleds=[],l.onunhandled=e,l.finalize=dn((function(){var n=this;Hn.push((function l(){0===n.unhandleds.length?t():e(n.unhandleds[0]),Hn.splice(Hn.indexOf(l),1)})),++Ln,En((function(){0==--Ln&&tt()}),[])}),l.finalize),n()}),t,e,l)}))}});var rt={awaits:0,echoes:0,id:0},ot=0,ut=[],it=0,at=0,st=0;function ct(n,t,e,l){var r=Mn,o=Object.create(r);o.parent=r,o.ref=0,o.global=!1,o.id=++st;var u=zn.env;o.env=Sn?{Promise:Rn,PromiseProp:{value:Rn,configurable:!0,writable:!0},all:Rn.all,race:Rn.race,resolve:Rn.resolve,reject:Rn.reject,nthen:kt(u.nthen,o),gthen:kt(u.gthen,o)}:{},t&&y(o,t),++r.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var i=mt(o,n,e,l);return 0===o.ref&&o.finalize(),i}function ht(){return rt.id||(rt.id=++ot),++rt.awaits,rt.echoes+=7,rt.id}function ft(n){!rt.awaits||n&&n!==rt.id||(0==--rt.awaits&&(rt.id=0),rt.echoes=7*rt.awaits)}function bt(n){return rt.echoes&&n&&n.constructor===In?(ht(),n.then((function(n){return ft(),n}),(function(n){return ft(),xt(n)}))):n}function dt(n){++at,rt.echoes&&0!=--rt.echoes||(rt.echoes=rt.id=0),ut.push(Mn),gt(n,!0)}function pt(){var n=ut[ut.length-1];ut.pop(),gt(n,!1)}function gt(n,t){var e,l=Mn;if((t?!rt.echoes||it++&&n===Mn:!it||--it&&n===Mn)||(e=t?dt.bind(null,n):pt,Cn.call(xn,e)),n!==Mn&&(Mn=n,l===zn&&(zn.env=vt()),Sn)){var r=zn.env.Promise,o=n.env;_n.then=o.nthen,r.prototype.then=o.gthen,(l.global||n.global)&&(Object.defineProperty(m,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject)}}function vt(){var n=m.Promise;return Sn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(m,"Promise"),all:n.all,race:n.race,resolve:n.resolve,reject:n.reject,nthen:_n.then,gthen:n.prototype.then}:{}}function mt(n,t,e,l,r){var o=Mn;try{return gt(n,!0),t(e,l,r)}finally{gt(o,!1)}}function yt(n,t,e){return"function"!=typeof n?n:function(){var l=Mn;e&&ht(),gt(t,!0);try{return n.apply(this,arguments)}finally{gt(l,!1)}}}function kt(n,t){return function(e,l){return n.call(this,yt(e,t,!1),yt(l,t,!1))}}function wt(n,t){var e;try{e=t.onuncatched(n)}catch(o){}if(!1!==e)try{var l,r={promise:t,reason:n};if(m.document&&document.createEvent?((l=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),y(l,r)):m.CustomEvent&&y(l=new CustomEvent("unhandledrejection",{detail:r}),r),l&&m.dispatchEvent&&(dispatchEvent(l),!m.PromiseRejectionEvent&&m.onunhandledrejection))try{m.onunhandledrejection(l)}catch(u){}l.defaultPrevented||console.warn("Unhandled rejection: "+(n.stack||n))}catch(o){}}var xt=Rn.reject;function _t(n){var t={},e=function(e,l){if(l){for(var r=arguments.length,o=new Array(r-1);--r;)o[r-1]=arguments[r];return t[e].subscribe.apply(null,o),n}if("string"==typeof e)return t[e]};e.addEventType=o;for(var l=1,r=arguments.length;l<r;++l)o(arguments[l]);return e;function o(n,l,r){if("object"==typeof n)return u(n);l||(l=mn),r||(r=hn);var o={subscribers:[],fire:r,subscribe:function(n){-1===o.subscribers.indexOf(n)&&(o.subscribers.push(n),o.fire=l(o.fire,n))},unsubscribe:function(n){o.subscribers=o.subscribers.filter((function(t){return t!==n})),o.fire=o.subscribers.reduce(l,r)}};return t[n]=e[n]=o,o}function u(n){g(n).forEach((function(t){var e=n[t];if(v(e))o(t,n[t][0],n[t][1]);else{if("asap"!==e)throw new an.InvalidArgument("Invalid event config");var l=o(t,fn,(function(){for(var n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];l.subscribers.forEach((function(n){O((function(){n.apply(null,t)}))}))}))}}))}}var Bt,Ct=String.fromCharCode(65535),It=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(n){return Ct}}(),Pt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",St=[],jt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ft=jt,Et=jt,Ot=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)};function Tt(n,t){var e,l,r,o,u,i=Tt.dependencies,a=y({addons:Tt.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},t),s=a.addons,c=a.autoOpen,h=a.indexedDB,f=a.IDBKeyRange,b=this._dbSchema={},d=[],p=[],k={},w=null,B=null,I=!1,P=null,S=!1,O="readwrite",z=this,N=new Rn((function(n){e=n})),R=new Rn((function(n,t){l=t})),U=!0,$=!!Ut(h);function G(n){this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function Q(n,t,e,l){var r=n.db.createObjectStore(t,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return l.forEach((function(n){X(r,n)})),r}function X(n,t){n.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function nn(n,t,e){var l=arguments.length;if(l<2)throw new an.InvalidArgument("Too few arguments");for(var r=new Array(l-1);--l;)r[l-1]=arguments[l];e=r.pop();var o=M(r);return[n,o,e]}function tn(n,t,e){this.name=n,this.schema=t,this._tx=e,this.hook=k[n]?k[n].hook:_t(null,{creating:[pn,hn],reading:[bn,fn],updating:[vn,hn],deleting:[gn,hn]})}function en(n,t,e){return(e?zt:Kt)((function(e){n.push(e),t&&t()}))}function on(n,t,e,l,r){return new Rn((function(o,u){var i=e.length,a=i-1;if(0===i)return o();if(l){var s,c=zt(u),h=At(null);D((function(){for(var l=0;l<i;++l){var u=e[l];r.call(s={onsuccess:null,onerror:null},u[0],u[1],t);var f=n.delete(u[0]);f._hookCtx=s,f.onerror=c,f.onsuccess=l===a?At(o):h}}),(function(n){throw s.onerror&&s.onerror(n),n}))}else for(var f=0;f<i;++f){var b=n.delete(e[f]);b.onerror=Kt(u),f===a&&(b.onsuccess=lt((function(){return o()})))}}))}function un(n,t,e,l){var r=this;this.db=z,this.mode=n,this.storeNames=t,this.idbtrans=null,this.on=_t(this,"complete","error","abort"),this.parent=l||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Rn((function(n,t){r._resolve=n,r._reject=t})),this._completion.then((function(){r.active=!1,r.on.complete.fire()}),(function(n){var t=r.active;return r.active=!1,r.on.error.fire(n),r.parent?r.parent._reject(n):t&&r.idbtrans&&r.idbtrans.abort(),xt(n)}))}function sn(n,t,e){this._ctx={table:n,index:":id"===t?null:t,or:e}}function cn(n,t){var e=null,l=null;if(t)try{e=t()}catch(u){l=u}var r=n._ctx,o=r.table;this._ctx={table:o,index:r.index,isPrimKey:!r.index||o.schema.primKey.keyPath&&r.index===o.schema.primKey.name,range:e,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:l,or:r.or,valueMapper:o.hook.reading.fire}}function dn(n,t){return!(n.filter||n.algorithm||n.or)&&(t?n.justLimit:!n.replayFilter)}function mn(n,t){return n._cfg.version-t._cfg.version}function kn(n,t,e){t.forEach((function(t){var l=e[t];n.forEach((function(n){t in n||(n===un.prototype||n instanceof un?C(n,t,{get:function(){return this.table(t)}}):n[t]=new tn(t,l))}))}))}function wn(n,t,e,l,r,o){var u=lt(o?function(n,t,l){return e(o(n),t,l)}:e,r);n.onerror||(n.onerror=Kt(r)),n.onsuccess=function(n,t){return function(){try{n.apply(this,arguments)}catch(e){t(e)}}}(t?function(){var e=n.result;if(e){var o=function(){e.continue()};t(e,(function(n){o=n}),l,r)&&u(e.value,e,(function(n){o=n})),o()}else l()}:function(){var t=n.result;if(t){var e=function(){t.continue()};u(t.value,t,(function(n){e=n})),e()}else l()},r)}function xn(n,t){return h.cmp(n,t)}function _n(n,t){return xn(n,t)>0?n:t}function Bn(n,t){return h.cmp(n,t)}function Cn(n,t){return h.cmp(t,n)}function Sn(n,t){return n<t?-1:n===t?0:1}function jn(n,t){return n>t?-1:n===t?0:1}function Fn(n,t){return n?t?function(){return n.apply(this,arguments)&&t.apply(this,arguments)}:n:t}function En(n,t){for(var e=t.db.objectStoreNames,l=0;l<e.length;++l){var o=e[l],u=t.objectStore(o);r="getAll"in u;for(var i=0;i<u.indexNames.length;++i){var a=u.indexNames[i],s=u.index(a).keyPath,c="string"==typeof s?s:"["+j(s).join("+")+"]";if(n[o]){var h=n[o].idxByName[c];h&&(h.name=a)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&m.WorkerGlobalScope&&m instanceof m.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r=!1)}function On(n){z.on("blocked").fire(n),St.filter((function(n){return n.name===z.name&&n!==z&&!n._vcFired})).map((function(t){return t.on("versionchange").fire(n)}))}this.version=function(n){if(w||I)throw new an.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var t=d.filter((function(t){return t._cfg.version===n}))[0];return t||(t=new G(n),d.push(t),d.sort(mn),U=!1,t)},y(G.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,n):n;var t={};d.forEach((function(n){y(t,n._cfg.storesSource)}));var e=this._cfg.dbschema={};return this._parseStoresSpec(t,e),b=z._dbSchema=e,[k,z,un.prototype].forEach((function(n){for(var t in n)n[t]instanceof tn&&delete n[t]})),kn([k,z,un.prototype,this._cfg.tables],g(e),e),p=g(e),this},upgrade:function(n){return this._cfg.contentUpgrade=n,this},_parseStoresSpec:function(n,t){g(n).forEach((function(e){if(null!==n[e]){var l={},r=function(n){var t=[];return n.split(",").forEach((function(n){var e=(n=n.trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(e)?e.match(/^\[(.*)\]$/)[1].split("+"):e;t.push(new Lt(e,l||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),v(l),/\./.test(n)))})),t}(n[e]),o=r.shift();if(o.multi)throw new an.Schema("Primary key cannot be multi-valued");o.keyPath&&K(l,o.keyPath,o.auto?0:o.keyPath),r.forEach((function(n){if(n.auto)throw new an.Schema("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new an.Schema("Index must have a name and cannot be an empty string");K(l,n.keyPath,n.compound?n.keyPath.map((function(){return""})):"")})),t[e]=new Ht(e,o,r,l)}}))}}),this._allTables=k,this._createTransaction=function(n,t,e,l){return new un(n,t,e,l)},this._whenReady=function(n){return S||Mn.letThrough?n():new Rn((function(n,t){if(!I){if(!c)return void t(new an.DatabaseClosed);z.open().catch(hn)}N.then(n,t)})).then(n)},this.verno=0,this.open=function(){if(I||w)return N.then((function(){return B?xt(B):z}));J&&(R._stackHolder=Y()),I=!0,B=null,S=!1;var t=e,l=null;return Rn.race([R,new Rn((function(t,e){if(!h)throw new an.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var r=U?h.open(n):h.open(n,Math.round(10*z.verno));if(!r)throw new an.MissingAPI("IndexedDB API not available");r.onerror=Kt(e),r.onblocked=lt(On),r.onupgradeneeded=lt((function(t){if(l=r.transaction,U&&!z._allowEmptyDB){r.onerror=Mt,l.abort(),r.result.close();var o=h.deleteDatabase(n);o.onsuccess=o.onerror=lt((function(){e(new an.NoSuchDatabase("Database "+n+" doesnt exist"))}))}else l.onerror=Kt(e),function(n,t,e){var l=z._createTransaction(O,p,b);l.create(t),l._completion.catch(e);var r=l._reject.bind(l);ct((function(){Mn.trans=l,0===n?(g(b).forEach((function(n){Q(t,n,b[n].primKey,b[n].indexes)})),Rn.follow((function(){return z.on.populate.fire(l)})).catch(r)):function(n,t,e){var l=[],r=d.filter((function(t){return t._cfg.version===n}))[0];if(!r)throw new an.Upgrade("Dexie specification of currently installed DB version is missing");b=z._dbSchema=r._cfg.dbschema;var o=!1;return d.filter((function(t){return t._cfg.version>n})).forEach((function(n){l.push((function(){var l=b,r=n._cfg.dbschema;En(l,e),En(r,e),b=z._dbSchema=r;var u=function(n,t){var e={del:[],add:[],change:[]};for(var l in n)t[l]||e.del.push(l);for(l in t){var r=n[l],o=t[l];if(r){var u={name:l,def:o,recreate:!1,del:[],add:[],change:[]};if(r.primKey.src!==o.primKey.src)u.recreate=!0,e.change.push(u);else{var i=r.idxByName,a=o.idxByName;for(var s in i)a[s]||u.del.push(s);for(s in a){var c=i[s],h=a[s];c?c.src!==h.src&&u.change.push(h):u.add.push(h)}(u.del.length>0||u.add.length>0||u.change.length>0)&&e.change.push(u)}}else e.add.push([l,o])}return e}(l,r);if(u.add.forEach((function(n){Q(e,n[0],n[1].primKey,n[1].indexes)})),u.change.forEach((function(n){if(n.recreate)throw new an.Upgrade("Not yet support for changing primary key");var t=e.objectStore(n.name);n.add.forEach((function(n){X(t,n)})),n.change.forEach((function(n){t.deleteIndex(n.name),X(t,n)})),n.del.forEach((function(n){t.deleteIndex(n)}))})),n._cfg.contentUpgrade)return o=!0,Rn.follow((function(){n._cfg.contentUpgrade(t)}))})),l.push((function(t){o&&Ft||function(n,t){for(var e=0;e<t.db.objectStoreNames.length;++e){var l=t.db.objectStoreNames[e];null==n[l]&&t.db.deleteObjectStore(l)}}(n._cfg.dbschema,t)}))})),function n(){return l.length?Rn.resolve(l.shift()(t.idbtrans)).then(n):Rn.resolve()}().then((function(){!function(n,t){g(n).forEach((function(e){t.db.objectStoreNames.contains(e)||Q(t,e,n[e].primKey,n[e].indexes)}))}(b,e)}))}(n,l,t).catch(r)}))}((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,l,e)}),e),r.onsuccess=lt((function(){if(l=null,w=r.result,St.push(z),U)!function(){if(z.verno=w.version/10,z._dbSchema=b={},0!==(p=j(w.objectStoreNames,0)).length){var n=w.transaction(Rt(p),"readonly");p.forEach((function(t){for(var e=n.objectStore(t),l=e.keyPath,r=l&&"string"==typeof l&&-1!==l.indexOf("."),o=new Lt(l,l||"",!1,!1,!!e.autoIncrement,l&&"string"!=typeof l,r),u=[],i=0;i<e.indexNames.length;++i){var a=e.index(e.indexNames[i]);r=(l=a.keyPath)&&"string"==typeof l&&-1!==l.indexOf(".");var s=new Lt(a.name,l,!!a.unique,!!a.multiEntry,!1,l&&"string"!=typeof l,r);u.push(s)}b[t]=new Ht(t,o,u,{})})),kn([k],g(b),b)}}();else if(w.objectStoreNames.length>0)try{En(b,w.transaction(Rt(w.objectStoreNames),"readonly"))}catch(e){}w.onversionchange=lt((function(n){z._vcFired=!0,z.on("versionchange").fire(n)})),$||"__dbnames"===n||Bt.dbnames.put({name:n}).catch(hn),t()}),e)}))]).then((function(){return P=[],Rn.resolve(Tt.vip(z.on.ready.fire)).then((function n(){if(P.length>0){var t=P.reduce(yn,hn);return P=[],Rn.resolve(Tt.vip(t)).then(n)}}))})).finally((function(){P=null})).then((function(){return I=!1,z})).catch((function(n){try{l&&l.abort()}catch(t){}return I=!1,z.close(),xt(B=n)})).finally((function(){S=!0,t()}))},this.close=function(){var n=St.indexOf(z);if(n>=0&&St.splice(n,1),w){try{w.close()}catch(t){}w=null}c=!1,B=new an.DatabaseClosed,I&&l(B),N=new Rn((function(n){e=n})),R=new Rn((function(n,t){l=t}))},this.delete=function(){var t=arguments.length>0;return new Rn((function(e,l){if(t)throw new an.InvalidArgument("Arguments not allowed in db.delete()");function r(){z.close();var t=h.deleteDatabase(n);t.onsuccess=lt((function(){$||Bt.dbnames.delete(n).catch(hn),e()})),t.onerror=Kt(l),t.onblocked=On}I?N.then(r):r()}))},this.backendDB=function(){return w},this.isOpen=function(){return null!==w},this.hasBeenClosed=function(){return B&&B instanceof an.DatabaseClosed},this.hasFailed=function(){return null!==B},this.dynamicallyOpened=function(){return U},this.name=n,_(this,{tables:{get:function(){return g(k).map((function(n){return k[n]}))}}}),this.on=_t(this,"populate","blocked","versionchange",{ready:[yn,hn]}),this.on.ready.subscribe=F(this.on.ready.subscribe,(function(n){return function(t,e){Tt.vip((function(){S?(B||Rn.resolve().then(t),e&&n(t)):P?(P.push(t),e&&n(t)):(n(t),e||n((function n(){z.on.ready.unsubscribe(t),z.on.ready.unsubscribe(n)})))}))}})),this.transaction=function(){var n=nn.apply(this,arguments);return this._transaction.apply(this,n)},this._transaction=function(n,t,e){var l=Mn.trans;l&&l.db===z&&-1===n.indexOf("!")||(l=null);var r=-1!==n.indexOf("?");n=n.replace("!","").replace("?","");try{var o=t.map((function(n){var t=n instanceof tn?n.name:n;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if("r"==n||"readonly"==n)n="readonly";else{if("rw"!=n&&n!=O)throw new an.InvalidArgument("Invalid transaction mode: "+n);n=O}if(l){if("readonly"===l.mode&&n===O){if(!r)throw new an.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l=null}l&&o.forEach((function(n){if(l&&-1===l.storeNames.indexOf(n)){if(!r)throw new an.SubTransaction("Table "+n+" not included in parent transaction.");l=null}})),r&&l&&!l.active&&(l=null)}}catch(i){return l?l._promise(null,(function(n,t){t(i)})):xt(i)}return l?l._promise(n,u,"lock"):Mn.trans?mt(Mn.transless,(function(){return z._whenReady(u)})):z._whenReady(u);function u(){return Rn.resolve().then((function(){var t,r=Mn.transless||Mn,u=z._createTransaction(n,o,b,l),i={trans:u,transless:r};l?u.idbtrans=l.idbtrans:u.create(),e.constructor===Pn&&ht();var a=Rn.follow((function(){if(t=e.call(u,u))if(t.constructor===In){var n=ft.bind(null,null);t.then(n,n)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=Nt(t))}),i);return(t&&"function"==typeof t.then?Rn.resolve(t).then((function(n){return u.active?n:xt(new an.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):a.then((function(){return t}))).then((function(n){return l&&u._resolve(),u._completion.then((function(){return n}))})).catch((function(n){return u._reject(n),xt(n)}))}))}},this.table=function(n){if(!x(k,n))throw new an.InvalidTable("Table "+n+" does not exist");return k[n]},_(tn.prototype,{_trans:function(n,t,e){var l=this._tx||Mn.trans;return l&&l.db===z?l===Mn.trans?l._promise(n,t,e):ct((function(){return l._promise(n,t,e)}),{trans:l,transless:Mn.transless||Mn}):function n(t,e,l){if(S||Mn.letThrough){var r=z._createTransaction(t,e,b);try{r.create()}catch(o){return xt(o)}return r._promise(t,(function(n,t){return ct((function(){return Mn.trans=r,l(n,t,r)}))})).then((function(n){return r._completion.then((function(){return n}))}))}if(!I){if(!c)return xt(new an.DatabaseClosed);z.open().catch(hn)}return N.then((function(){return n(t,e,l)}))}(n,[this.name],t)},_idbstore:function(n,t,e){var l=this.name;return this._trans(n,(function(n,e,r){if(-1===r.storeNames.indexOf(l))throw new an.NotFound("Table"+l+" not part of transaction");return t(n,e,r.idbtrans.objectStore(l),r)}),e)},get:function(n,t){if(n&&n.constructor===Object)return this.where(n).first(t);var e=this;return this._idbstore("readonly",(function(t,l,r){var o=r.get(n);o.onerror=Kt(l),o.onsuccess=lt((function(){t(e.hook.reading.fire(o.result))}),l)})).then(t)},where:function(n){if("string"==typeof n)return new sn(this,n);if(v(n))return new sn(this,"["+n.join("+")+"]");var t=g(n);if(1===t.length)return this.where(t[0]).equals(n[t[0]]);var e=this.schema.indexes.concat(this.schema.primKey).filter((function(n){return n.compound&&t.every((function(t){return n.keyPath.indexOf(t)>=0}))&&n.keyPath.every((function(n){return t.indexOf(n)>=0}))}))[0];if(e&&It!==Ct)return this.where(e.name).equals(e.keyPath.map((function(t){return n[t]})));e||console.warn("The query "+JSON.stringify(n)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var l=this.schema.idxByName,r=t.reduce((function(t,e){return[t[0]||l[e],t[0]||!l[e]?Fn(t[1],(function(t){return""+A(t,e)==""+n[e]})):t[1]]}),[null,null]),o=r[0];return o?this.where(o.name).equals(n[o.keyPath]).filter(r[1]):e?this.filter(r[1]):this.where(t).equals("")},count:function(n){return this.toCollection().count(n)},offset:function(n){return this.toCollection().offset(n)},limit:function(n){return this.toCollection().limit(n)},reverse:function(){return this.toCollection().reverse()},filter:function(n){return this.toCollection().and(n)},each:function(n){return this.toCollection().each(n)},toArray:function(n){return this.toCollection().toArray(n)},orderBy:function(n){return new cn(new sn(this,v(n)?"["+n.join("+")+"]":n))},toCollection:function(){return new cn(new sn(this))},mapToClass:function(n,t){this.schema.mappedClass=n;var e=Object.create(n.prototype);t&&Dt(e,t),this.schema.instanceTemplate=e;var l=function(t){if(!t)return t;var e=Object.create(n.prototype);for(var l in t)if(x(t,l))try{e[l]=t[l]}catch(r){}return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),n},defineClass:function(n){return this.mapToClass(Tt.defineClass(n),n)},bulkDelete:function(n){return this.hook.deleting.fire===hn?this._idbstore(O,(function(t,e,l,r){t(on(l,r,n,!1,hn))})):this.where(":id").anyOf(n).delete().then((function(){}))},bulkPut:function(n,t){var e=this;return this._idbstore(O,(function(l,r,o){if(!o.keyPath&&!e.schema.primKey.auto&&!t)throw new an.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new an.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==n.length)throw new an.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return l();var u,i,a=function(n){0===s.length?l(n):r(new rn(e.name+".bulkPut(): "+s.length+" of "+c+" operations failed",s))},s=[],c=n.length,h=e;if(e.hook.creating.fire===hn&&e.hook.updating.fire===hn){i=en(s);for(var f=0,b=n.length;f<b;++f)(u=t?o.put(n[f],t[f]):o.put(n[f])).onerror=i;u.onerror=en(s,a),u.onsuccess=qt(a)}else{var d=t||o.keyPath&&n.map((function(n){return A(n,o.keyPath)})),p=d&&T(d,(function(t,e){return null!=t&&[t,n[e]]}));(d?h.where(":id").anyOf(d.filter((function(n){return null!=n}))).modify((function(){this.value=p[this.primKey],p[this.primKey]=null})).catch(ln,(function(n){s=n.failures})).then((function(){for(var e=[],l=t&&[],r=d.length-1;r>=0;--r){var o=d[r];(null==o||p[o])&&(e.push(n[r]),t&&l.push(o),null!=o&&(p[o]=null))}return e.reverse(),t&&l.reverse(),h.bulkAdd(e,l)})).then((function(n){var t=d[d.length-1];return null!=t?t:n})):h.bulkAdd(n)).then(a).catch(rn,(function(n){s=s.concat(n.failures),a()})).catch(r)}}),"locked")},bulkAdd:function(n,t){var e=this,l=this.hook.creating.fire;return this._idbstore(O,(function(r,o,u,i){if(!u.keyPath&&!e.schema.primKey.auto&&!t)throw new an.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&t)throw new an.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==n.length)throw new an.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return r();function a(n){0===f.length?r(n):o(new rn(e.name+".bulkAdd(): "+f.length+" of "+b+" operations failed",f))}var s,c,h,f=[],b=n.length;if(l!==hn){var d,p=u.keyPath;c=en(f,null,!0),h=At(null),D((function(){for(var e=0,r=n.length;e<r;++e){d={onerror:null,onsuccess:null};var o=t&&t[e],a=n[e],f=t?o:p?A(a,p):void 0,b=l.call(d,f,a,i);null==f&&null!=b&&(p?K(a=L(a),p,b):o=b),(s=null!=o?u.add(a,o):u.add(a))._hookCtx=d,e<r-1&&(s.onerror=c,d.onsuccess&&(s.onsuccess=h))}}),(function(n){throw d.onerror&&d.onerror(n),n})),s.onerror=en(f,a,!0),s.onsuccess=At(a)}else{c=en(f);for(var g=0,v=n.length;g<v;++g)(s=t?u.add(n[g],t[g]):u.add(n[g])).onerror=c;s.onerror=en(f,a),s.onsuccess=qt(a)}}))},add:function(n,t){var e=this.hook.creating.fire;return this._idbstore(O,(function(l,r,o,u){var i={onsuccess:null,onerror:null};if(e!==hn){var a=null!=t?t:o.keyPath?A(n,o.keyPath):void 0,s=e.call(i,a,n,u);null==a&&null!=s&&(o.keyPath?K(n,o.keyPath,s):t=s)}try{var c=null!=t?o.add(n,t):o.add(n);c._hookCtx=i,c.onerror=zt(r),c.onsuccess=At((function(t){var e=o.keyPath;e&&K(n,e,t),l(t)}))}catch(h){throw i.onerror&&i.onerror(h),h}}))},put:function(n,t){var e=this;if(this.hook.creating.fire!==hn||this.hook.updating.fire!==hn){var l=this.schema.primKey.keyPath,r=void 0!==t?t:l&&A(n,l);return null==r?this.add(n):(n=L(n),this._trans(O,(function(){return e.where(":id").equals(r).modify((function(){this.value=n})).then((function(l){return 0===l?e.add(n,t):r}))}),"locked"))}return this._idbstore(O,(function(e,l,r){var o=void 0!==t?r.put(n,t):r.put(n);o.onerror=Kt(l),o.onsuccess=lt((function(t){var l=r.keyPath;l&&K(n,l,t.target.result),e(o.result)}))}))},delete:function(n){return this.hook.deleting.subscribers.length?this.where(":id").equals(n).delete():this._idbstore(O,(function(t,e,l){var r=l.delete(n);r.onerror=Kt(e),r.onsuccess=lt((function(){t(r.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(O,(function(n,t,e){var l=e.clear();l.onerror=Kt(t),l.onsuccess=lt((function(){n(l.result)}))}))},update:function(n,t){if("object"!=typeof t||v(t))throw new an.InvalidArgument("Modifications must be an object.");if("object"!=typeof n||v(n))return this.where(":id").equals(n).modify(t);g(t).forEach((function(e){K(n,e,t[e])}));var e=A(n,this.schema.primKey.keyPath);return void 0===e?xt(new an.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)}}),_(un.prototype,{_lock:function(){return E(!Mn.global),++this._reculock,1!==this._reculock||Mn.global||(Mn.lockOwnerFor=this),this},_unlock:function(){if(E(!Mn.global),0==--this._reculock)for(Mn.global||(Mn.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{mt(n[1],n[0])}catch(t){}}return this},_locked:function(){return this._reculock&&Mn.lockOwnerFor!==this},create:function(n){var t=this;if(!this.mode)return this;if(E(!this.idbtrans),!n&&!w)switch(B&&B.name){case"DatabaseClosedError":throw new an.DatabaseClosed(B);case"MissingAPIError":throw new an.MissingAPI(B.message,B);default:throw new an.OpenFailed(B)}if(!this.active)throw new an.TransactionInactive;return E(null===this._completion._state),(n=this.idbtrans=n||w.transaction(Rt(this.storeNames),this.mode)).onerror=lt((function(e){Mt(e),t._reject(n.error)})),n.onabort=lt((function(e){Mt(e),t.active&&t._reject(new an.Abort(n.error)),t.active=!1,t.on("abort").fire(e)})),n.oncomplete=lt((function(){t.active=!1,t._resolve()})),this},_promise:function(n,t,e){var l=this;if(n===O&&this.mode!==O)return xt(new an.ReadOnly("Transaction is readonly"));if(!this.active)return xt(new an.TransactionInactive);if(this._locked())return new Rn((function(r,o){l._blockedFuncs.push([function(){l._promise(n,t,e).then(r,o)},Mn])}));if(e)return ct((function(){var n=new Rn((function(n,e){l._lock();var r=t(n,e,l);r&&r.then&&r.then(n,e)}));return n.finally((function(){return l._unlock()})),n._lib=!0,n}));var r=new Rn((function(n,e){var r=t(n,e,l);r&&r.then&&r.then(n,e)}));return r._lib=!0,r},_root:function(){return this.parent?this.parent._root():this},waitFor:function(n){var t=this._root();if(n=Rn.resolve(n),t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var e=t.idbtrans.objectStore(t.storeNames[0]);!function n(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(e.get(-1/0).onsuccess=n)}()}var l=t._waitingFor;return new Rn((function(e,r){n.then((function(n){return t._waitingQueue.push(lt(e.bind(null,n)))}),(function(n){return t._waitingQueue.push(lt(r.bind(null,n)))})).finally((function(){t._waitingFor===l&&(t._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new an.Abort),this.active=!1},tables:{get:(o="Transaction.tables",u=function(){return k},function(){return console.warn(o+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+Z(Y(),1)),u.apply(this,arguments)})},table:function(n){return new tn(n,z.table(n).schema,this)}}),_(sn.prototype,(function(){function n(n,t,e){var l=n instanceof sn?new cn(n):n;return l._ctx.error=e?new e(t):new TypeError(t),l}function t(n){return new cn(n,(function(){return f.only("")})).limit(0)}function e(n,t,e,l,r,o){for(var u=Math.min(n.length,l.length),i=-1,a=0;a<u;++a){var s=t[a];if(s!==l[a])return r(n[a],e[a])<0?n.substr(0,a)+e[a]+e.substr(a+1):r(n[a],l[a])<0?n.substr(0,a)+l[a]+e.substr(a+1):i>=0?n.substr(0,i)+t[i]+e.substr(i+1):null;r(n[a],s)<0&&(i=a)}return u<l.length&&"next"===o?n+e.substr(n.length):u<n.length&&"prev"===o?n.substr(0,e.length):i<0?null:n.substr(0,i)+l[i]+e.substr(i+1)}function l(t,l,r,o){var u,i,a,s,c,h,b,d=r.length;if(!r.every((function(n){return"string"==typeof n})))return n(t,"String expected.");function p(n){u=function(n){return"next"===n?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}(n),i=function(n){return"next"===n?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}(n),a="next"===n?Sn:jn;var t=r.map((function(n){return{lower:i(n),upper:u(n)}})).sort((function(n,t){return a(n.lower,t.lower)}));s=t.map((function(n){return n.upper})),c=t.map((function(n){return n.lower})),h=n,b="next"===n?"":o}p("next");var g=new cn(t,(function(){return f.bound(s[0],c[d-1]+o)}));g._ondirectionchange=function(n){p(n)};var v=0;return g._addAlgorithm((function(n,t,r){var o=n.key;if("string"!=typeof o)return!1;var u=i(o);if(l(u,c,v))return!0;for(var f=null,p=v;p<d;++p){var g=e(o,u,s[p],c[p],a,h);null===g&&null===f?v=p+1:(null===f||a(f,g)>0)&&(f=g)}return t(null!==f?function(){n.continue(f+b)}:r),!1})),g}return{between:function(e,l,r,o){r=!1!==r,o=!0===o;try{return xn(e,l)>0||0===xn(e,l)&&(r||o)&&(!r||!o)?t(this):new cn(this,(function(){return f.bound(e,l,!r,!o)}))}catch(u){return n(this,Pt)}},equals:function(n){return new cn(this,(function(){return f.only(n)}))},above:function(n){return new cn(this,(function(){return f.lowerBound(n,!0)}))},aboveOrEqual:function(n){return new cn(this,(function(){return f.lowerBound(n)}))},below:function(n){return new cn(this,(function(){return f.upperBound(n,!0)}))},belowOrEqual:function(n){return new cn(this,(function(){return f.upperBound(n)}))},startsWith:function(t){return"string"!=typeof t?n(this,"String expected."):this.between(t,t+Ct,!0,!0)},startsWithIgnoreCase:function(n){return""===n?this.startsWith(n):l(this,(function(n,t){return 0===n.indexOf(t[0])}),[n],Ct)},equalsIgnoreCase:function(n){return l(this,(function(n,t){return n===t[0]}),[n],"")},anyOfIgnoreCase:function(){var n=W.apply(V,arguments);return 0===n.length?t(this):l(this,(function(n,t){return-1!==t.indexOf(n)}),n,"")},startsWithAnyOfIgnoreCase:function(){var n=W.apply(V,arguments);return 0===n.length?t(this):l(this,(function(n,t){return t.some((function(t){return 0===n.indexOf(t)}))}),n,Ct)},anyOf:function(){var e=W.apply(V,arguments),l=Bn;try{e.sort(l)}catch(u){return n(this,Pt)}if(0===e.length)return t(this);var r=new cn(this,(function(){return f.bound(e[0],e[e.length-1])}));r._ondirectionchange=function(n){e.sort(l="next"===n?Bn:Cn)};var o=0;return r._addAlgorithm((function(n,t,r){for(var u=n.key;l(u,e[o])>0;)if(++o===e.length)return t(r),!1;return 0===l(u,e[o])||(t((function(){n.continue(e[o])})),!1)})),r},notEqual:function(n){return this.inAnyRange([[-1/0,n],[n,It]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=W.apply(V,arguments);if(0===t.length)return new cn(this);try{t.sort(Bn)}catch(l){return n(this,Pt)}var e=t.reduce((function(n,t){return n?n.concat([[n[n.length-1][1],t]]):[[-1/0,t]]}),null);return e.push([t[t.length-1],It]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(e,l){if(0===e.length)return t(this);if(!e.every((function(n){return void 0!==n[0]&&void 0!==n[1]&&Bn(n[0],n[1])<=0})))return n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",an.InvalidArgument);var r,o=!l||!1!==l.includeLowers,u=l&&!0===l.includeUppers,i=Bn;function a(n,t){return i(n[0],t[0])}try{(r=e.reduce((function(n,t){for(var e=0,l=n.length;e<l;++e){var r=n[e];if(xn(t[0],r[1])<0&&xn(t[1],r[0])>0){r[0]=xn(o=r[0],u=t[0])<0?o:u,r[1]=_n(r[1],t[1]);break}}var o,u;return e===l&&n.push(t),n}),[])).sort(a)}catch(p){return n(this,Pt)}var s=0,c=u?function(n){return Bn(n,r[s][1])>0}:function(n){return Bn(n,r[s][1])>=0},h=o?function(n){return Cn(n,r[s][0])>0}:function(n){return Cn(n,r[s][0])>=0},b=c,d=new cn(this,(function(){return f.bound(r[0][0],r[r.length-1][1],!o,!u)}));return d._ondirectionchange=function(n){"next"===n?(b=c,i=Bn):(b=h,i=Cn),r.sort(a)},d._addAlgorithm((function(n,t,e){for(var l=n.key;b(l);)if(++s===r.length)return t(e),!1;return!!function(n){return!c(n)&&!h(n)}(l)||0!==xn(l,r[s][1])&&0!==xn(l,r[s][0])&&(t((function(){n.continue(i===Bn?r[s][0]:r[s][1])})),!1)})),d},startsWithAnyOf:function(){var e=W.apply(V,arguments);return e.every((function(n){return"string"==typeof n}))?0===e.length?t(this):this.inAnyRange(e.map((function(n){return[n,n+Ct]}))):n(this,"startsWithAnyOf() only works with strings")}}})),_(cn.prototype,(function(){function n(n,t){n.filter=Fn(n.filter,t)}function t(n,t,e){var l=n.replayFilter;n.replayFilter=l?function(){return Fn(l(),t())}:t,n.justLimit=e&&!l}function e(n,t){if(n.isPrimKey)return t;var e=n.table.schema.idxByName[n.index];if(!e)throw new an.Schema("KeyPath "+n.index+" on object store "+t.name+" is not indexed");return t.index(e.name)}function l(n,t){var l=e(n,t);return n.keysOnly&&"openKeyCursor"in l?l.openKeyCursor(n.range||null,n.dir+n.unique):l.openCursor(n.range||null,n.dir+n.unique)}function o(n,t,e,r,o){var u=n.replayFilter?Fn(n.filter,n.replayFilter()):n.filter;n.or?function(){var i={},a=0;function s(){2==++a&&e()}function c(n,e,l){if(!u||u(e,l,s,r)){var o=e.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),x(i,a)||(i[a]=!0,t(n,e,l))}}n.or._iterate(c,s,r,o),wn(l(n,o),n.algorithm,c,s,r,!n.keysOnly&&n.valueMapper)}():wn(l(n,o),Fn(n.algorithm,u),t,e,r,!n.keysOnly&&n.valueMapper)}return{_read:function(n,t){var e=this._ctx;return e.error?e.table._trans(null,xt.bind(null,e.error)):e.table._idbstore("readonly",n).then(t)},_write:function(n){var t=this._ctx;return t.error?t.table._trans(null,xt.bind(null,t.error)):t.table._idbstore(O,n,"locked")},_addAlgorithm:function(n){var t=this._ctx;t.algorithm=Fn(t.algorithm,n)},_iterate:function(n,t,e,l){return o(this._ctx,n,t,e,l)},clone:function(n){var t=Object.create(this.constructor.prototype),e=Object.create(this._ctx);return n&&y(e,n),t._ctx=e,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(n){var t=this._ctx;return this._read((function(e,l,r){o(t,n,e,l,r)}))},count:function(n){var t=this._ctx;if(dn(t,!0))return this._read((function(n,l,r){var o=e(t,r),u=t.range?o.count(t.range):o.count();u.onerror=Kt(l),u.onsuccess=function(e){n(Math.min(e.target.result,t.limit))}}),n);var l=0;return this._read((function(n,e,r){o(t,(function(){return++l,!1}),(function(){n(l)}),e,r)}),n)},sortBy:function(n,t){var e=n.split(".").reverse(),l=e[0],r=e.length-1;function o(n,t){return t?o(n[e[t]],t-1):n[l]}var u="next"===this._ctx.dir?1:-1;function i(n,t){var e=o(n,r),l=o(t,r);return e<l?-u:e>l?u:0}return this.toArray((function(n){return n.sort(i)})).then(t)},toArray:function(n){var t=this._ctx;return this._read((function(n,l,u){if(r&&"next"===t.dir&&dn(t,!0)&&t.limit>0){var i=t.table.hook.reading.fire,a=e(t,u),s=t.limit<1/0?a.getAll(t.range,t.limit):a.getAll(t.range);s.onerror=Kt(l),s.onsuccess=qt(i===fn?n:function(t){try{n(t.map(i))}catch(e){l(e)}})}else{var c=[];o(t,(function(n){c.push(n)}),(function(){n(c)}),l,u)}}),n)},offset:function(n){var e=this._ctx;return n<=0?this:(e.offset+=n,dn(e)?t(e,(function(){var t=n;return function(n,e){return 0===t||(1===t?(--t,!1):(e((function(){n.advance(t),t=0})),!1))}})):t(e,(function(){var t=n;return function(){return--t<0}})),this)},limit:function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),t(this._ctx,(function(){var t=n;return function(n,e,l){return--t<=0&&e(l),t>=0}}),!0),this},until:function(t,e){return n(this._ctx,(function(n,l,r){return!t(n.value)||(l(r),e)})),this},first:function(n){return this.limit(1).toArray((function(n){return n[0]})).then(n)},last:function(n){return this.reverse().first(n)},filter:function(t){return n(this._ctx,(function(n){return t(n.value)})),function(n,t){n.isMatch=Fn(n.isMatch,t)}(this._ctx,t),this},and:function(n){return this.filter(n)},or:function(n){return new sn(this._ctx.table,n,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,e){n(e.key,e)}))},eachUniqueKey:function(n){return this._ctx.unique="unique",this.eachKey(n)},eachPrimaryKey:function(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,e){n(e.primaryKey,e)}))},keys:function(n){var t=this._ctx;t.keysOnly=!t.isMatch;var e=[];return this.each((function(n,t){e.push(t.key)})).then((function(){return e})).then(n)},primaryKeys:function(n){var t=this._ctx;if(r&&"next"===t.dir&&dn(t,!0)&&t.limit>0)return this._read((function(n,l,r){var o=e(t,r),u=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);u.onerror=Kt(l),u.onsuccess=qt(n)})).then(n);t.keysOnly=!t.isMatch;var l=[];return this.each((function(n,t){l.push(t.primaryKey)})).then((function(){return l})).then(n)},uniqueKeys:function(n){return this._ctx.unique="unique",this.keys(n)},firstKey:function(n){return this.limit(1).keys((function(n){return n[0]})).then(n)},lastKey:function(n){return this.reverse().firstKey(n)},distinct:function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var l={};return n(this._ctx,(function(n){var t=n.primaryKey.toString(),e=x(l,t);return l[t]=!0,!e})),this},modify:function(n){var t=this,e=this._ctx.table.hook,l=e.updating.fire,r=e.deleting.fire;return this._write((function(e,o,u,i){var a;if("function"==typeof n)a=l===hn&&r===hn?n:function(t){var e=L(t);if(!1===n.call(this,t,this))return!1;if(x(this,"value")){var o=H(e,this.value),u=l.call(this,o,this.primKey,e,i);u&&(t=this.value,g(u).forEach((function(n){K(t,n,u[n])})))}else r.call(this,this.primKey,t,i)};else if(l===hn){var s=g(n),c=s.length;a=function(t){for(var e=!1,l=0;l<c;++l){var r=s[l],o=n[r];A(t,r)!==o&&(K(t,r,o),e=!0)}return e}}else{var h=n;n=q(h),a=function(t){var e=!1,r=l.call(this,n,this.primKey,L(t),i);return r&&y(n,r),g(n).forEach((function(l){var r=n[l];A(t,l)!==r&&(K(t,l,r),e=!0)})),r&&(n=q(h)),e}}var f=0,b=0,d=!1,p=[],v=[],m=null;function k(n){return n&&(p.push(n),v.push(m)),o(new ln("Error modifying one or more objects",p,b,v))}function w(){d&&b+p.length===f&&(p.length>0?k():e(b))}t.clone().raw()._iterate((function(n,t){m=t.primaryKey;var e={primKey:t.primaryKey,value:n,onsuccess:null,onerror:null};function l(n){return p.push(n),v.push(e.primKey),w(),!0}if(!1!==a.call(e,n,e)){var r=!x(e,"value");++f,D((function(){var n=r?t.delete():t.update(e.value);n._hookCtx=e,n.onerror=zt(l),n.onsuccess=At((function(){++b,w()}))}),l)}else e.onsuccess&&e.onsuccess(e.value)}),(function(){d=!0,w()}),k,u)}))},delete:function(){var n=this,t=this._ctx,e=t.range,l=t.table.hook.deleting.fire,r=l!==hn;if(!r&&dn(t)&&(t.isPrimKey&&!Et||!e))return this._write((function(n,t,l){var r=Kt(t),o=e?l.count(e):l.count();o.onerror=r,o.onsuccess=function(){var u=o.result;D((function(){var t=e?l.delete(e):l.clear();t.onerror=r,t.onsuccess=function(){return n(u)}}),(function(n){return t(n)}))}}));var o=r?2e3:1e4;return this._write((function(e,u,i,a){var s=0,c=n.clone({keysOnly:!t.isMatch&&!r}).distinct().limit(o).raw(),h=[],f=function(){return c.each(r?function(n,t){h.push([t.primaryKey,t.value])}:function(n,t){h.push(t.primaryKey)}).then((function(){return h.sort(r?function(n,t){return Bn(n[0],t[0])}:Bn),on(i,a,h,r,l)})).then((function(){var n=h.length;return s+=n,h=[],n<o?s:f()}))};e(f())}))}}})),y(this,{Collection:cn,Table:tn,Transaction:un,Version:G,WhereClause:sn}),z.on("versionchange",(function(n){n.newVersion>0?console.warn("Another connection wants to upgrade database '"+z.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+z.name+"'. Closing db now to resume the delete request."),z.close()})),z.on("blocked",(function(n){!n.newVersion||n.newVersion<n.oldVersion?console.warn("Dexie.delete('"+z.name+"') was blocked"):console.warn("Upgrade '"+z.name+"' blocked by other connection holding version "+n.oldVersion/10)})),s.forEach((function(n){n(z)}))}function Dt(n,t){return g(t).forEach((function(e){var l=function n(t){if("function"==typeof t)return new t;if(v(t))return[n(t[0])];if(t&&"object"==typeof t){var e={};return Dt(e,t),e}return t}(t[e]);n[e]=l})),n}function At(n){return lt((function(t){var e=t.target,l=e._hookCtx,r=l.value||e.result,o=l&&l.onsuccess;o&&o(r),n&&n(r)}),n)}function Kt(n){return lt((function(t){return Mt(t),n(t.target.error),!1}))}function qt(n){return lt((function(t){n(t.target.result)}))}function zt(n){return lt((function(t){var e=t.target,l=e.error,r=e._hookCtx,o=r&&r.onerror;return o&&o(l),Mt(t),n(l),!1}))}function Mt(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}function Nt(n){var t=function(t){return n.next(t)},e=r(t),l=r((function(t){return n.throw(t)}));function r(n){return function(t){var r=n(t),o=r.value;return r.done?o:o&&"function"==typeof o.then?o.then(e,l):v(o)?Rn.all(o).then(e,l):e(o)}}return r(t)()}function Lt(n,t,e,l,r,o,u){this.name=n,this.keyPath=t,this.unique=e,this.multi=l,this.auto=r,this.compound=o,this.dotted=u;var i="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(e?"&":"")+(l?"*":"")+(r?"++":"")+i}function Ht(n,t,e,l){this.name=n,this.primKey=t||new Lt,this.indexes=e||[new Lt],this.instanceTemplate=l,this.mappedClass=null,this.idxByName=T(e,(function(n){return[n.name,n]}))}function Rt(n){return 1===n.length?n[0]:n}function Ut(n){var t=n&&(n.getDatabaseNames||n.webkitGetDatabaseNames);return t&&t.bind(n)}$(J,Ot),_(Tt,cn),_(Tt,{delete:function(n){var t=new Tt(n),e=t.delete();return e.onblocked=function(n){return t.on("blocked",n),this},e},exists:function(n){return new Tt(n).open().then((function(n){return n.close(),!0})).catch(Tt.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(n){var t=Ut(Tt.dependencies.indexedDB);return t?new Rn((function(n,e){var l=t();l.onsuccess=function(t){n(j(t.target.result,0))},l.onerror=Kt(e)})).then(n):Bt.dbnames.toCollection().primaryKeys(n)},defineClass:function(){return function(n){n&&y(this,n)}},applyStructure:Dt,ignoreTransaction:function(n){return Mn.trans?mt(Mn.transless,n):n()},vip:function(n){return ct((function(){return Mn.letThrough=!0,n()}))},async:function(n){return function(){try{var t=Nt(n.apply(this,arguments));return t&&"function"==typeof t.then?t:Rn.resolve(t)}catch(e){return xt(e)}}},spawn:function(n,t,e){try{var l=Nt(n.apply(e,t||[]));return l&&"function"==typeof l.then?l:Rn.resolve(l)}catch(r){return xt(r)}},currentTransaction:{get:function(){return Mn.trans||null}},waitFor:function(n,t){var e=Rn.resolve("function"==typeof n?Tt.ignoreTransaction(n):n).timeout(t||6e4);return Mn.trans?Mn.trans.waitFor(e):e},Promise:Rn,debug:{get:function(){return J},set:function(n){$(n,"dexie"===n?function(){return!0}:Ot)}},derive:I,extend:y,props:_,override:F,Events:_t,getByKeyPath:A,setByKeyPath:K,delByKeyPath:function(n,t){"string"==typeof t?K(n,t,void 0):"length"in t&&[].map.call(t,(function(t){K(n,t,void 0)}))},shallowClone:q,deepClone:L,getObjectDiff:H,asap:O,maxKey:It,minKey:-1/0,addons:[],connections:St,MultiModifyError:an.Modify,errnames:on,IndexSpec:Lt,TableSchema:Ht,dependencies:function(){try{return{indexedDB:m.indexedDB||m.mozIndexedDB||m.webkitIndexedDB||m.msIndexedDB,IDBKeyRange:m.IDBKeyRange||m.webkitIDBKeyRange}}catch(n){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map((function(n){return parseInt(n)})).reduce((function(n,t,e){return n+t/Math.pow(10,2*e)})),default:Tt,Dexie:Tt}),Rn.rejectionMapper=function(n,t){if(!n||n instanceof en||n instanceof TypeError||n instanceof SyntaxError||!n.name||!sn[n.name])return n;var e=new sn[n.name](t||n.message,n);return"stack"in n&&C(e,"stack",{get:function(){return this.inner.stack}}),e},(Bt=new Tt("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==m.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(n){return Bt.dbnames.put({name:n}).catch(hn)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(n){}}();var Vt=Tt;let Wt=(()=>{class n extends Vt{constructor(){super("books"),this.version(1).stores({books:"++id, book_id, book_name, book_cover, current_page, mark",siteCfg:"page_bg, page_size"})}}return n.ngInjectableDef=l.Ob({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Jt=(()=>{class n{constructor(n){this.dexieService=n,this.table=this.dexieService.table("books")}getAll(){return this.table.toArray()}add(n){return this.table.add(n)}update(n,t){return this.table.update(n,t)}remove(n){return this.table.delete(n)}getDetailByBookId(n){return this.table.where({book_id:n}).first()}saveBookInfo(n){this.getDetailByBookId(n.book_id).then(t=>{t.id?this.update(t.id,n):this.add(n)}).catch(t=>this.add(n))}}return n.ngInjectableDef=l.Ob({factory:function(){return new n(l.Pb(Wt))},token:n,providedIn:"root"}),n})();class $t{constructor(n,t,e,l){this.bookService=n,this.route=t,this.bookFrontService=e,this.router=l,this.currentPage=1,this.searchBarShow=!1}ngOnInit(){let n=this.route.snapshot.params;this.listParam={page:n.page||1,bookType:n.bookType,tags:n.tags||[],type:n.type||[]},this.getBookList()}loadData(n){if("reading"==this.route.snapshot.params.type)return n.target.disabled=!0,!1;this.currentPage+=1,this.listParam=Object.assign(this.listParam,{page:this.currentPage}),this.bookService.getBookList(this.listParam).subscribe(t=>{0!=t.length?(this.books=this.books.concat(t),n.target.complete()):n.target.disabled=!0})}getBookList(){let n=this;"reading"==this.route.snapshot.params.type?n.bookFrontService.getAll().then(t=>{n.books=[],t.forEach(t=>{let e=new h;e.name=t.book_name,e._id=t.book_id,e.cover=t.book_cover,n.books.push(e)})}):this.bookService.getBookList(this.listParam).subscribe(n=>{this.books=n})}showSearchToggle(){this.searchBarShow=!this.searchBarShow}searchBooks(n){this.listParam=Object.assign(this.listParam,{search:n}),this.bookService.getBookList(this.listParam).subscribe(n=>{this.books=n,this.searchBarShow=!this.searchBarShow})}}var Gt=l.nb({encapsulation:0,styles:[["@media (max-width:768px){ion-card[_ngcontent-%COMP%]{margin:0}}ion-card-header[_ngcontent-%COMP%]{padding:10px}ion-card-subtitle[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]],data:{}});function Qt(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,5,"ion-toolbar",[],null,null,null,u.zb,u.M)),l.ob(1,49152,null,0,i.xb,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,3,"ion-searchbar",[["debounce","500"],["inputmode","search"],["placeholder","Search Favorites"]],null,[[null,"ionChange"],[null,"ionBlur"]],(function(n,t,e){var r=!0,o=n.component;return"ionBlur"===t&&(r=!1!==l.Bb(n,5)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,5)._handleInputEvent(e.target)&&r),"ionChange"===t&&(r=!1!==o.searchBooks(e.target.value)&&r),r}),u.rb,u.E)),l.Fb(5120,null,a.g,(function(n){return[n]}),[i.Hb]),l.ob(4,49152,null,0,i.fb,[l.h,l.k,l.x],{debounce:[0,"debounce"],inputmode:[1,"inputmode"],placeholder:[2,"placeholder"]},null),l.ob(5,16384,null,0,i.Hb,[l.k],null,null)],(function(n,t){n(t,4,0,"500","search","Search Favorites")}),null)}function Yt(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,12,"ion-col",[["size","4"],["sizeLg","2"],["sizeMd","3"]],null,null,null,u.W,u.j)),l.ob(1,49152,null,0,i.r,[l.h,l.k,l.x],{size:[0,"size"],sizeLg:[1,"sizeLg"],sizeMd:[2,"sizeMd"]},null),(n()(),l.pb(2,0,null,0,10,"ion-card",[],null,[[null,"click"]],(function(n,t,e){var r=!0;return"click"===t&&(r=!1!==l.Bb(n,4).onClick()&&r),"click"===t&&(r=!1!==l.Bb(n,6).onClick(e)&&r),r}),u.V,u.e)),l.ob(3,49152,null,0,i.k,[l.h,l.k,l.x],null,null),l.ob(4,16384,null,0,s.n,[s.m,s.a,[8,null],l.B,l.k],{routerLink:[0,"routerLink"]},null),l.Cb(5,1),l.ob(6,737280,null,0,i.Fb,[c.h,i.Cb,l.k,s.m,[2,s.n]],null,null),(n()(),l.pb(7,0,null,0,0,"img",[["style","width: 100%"]],[[8,"src",4]],null,null,null,null)),(n()(),l.pb(8,0,null,0,4,"ion-card-header",[],null,null,null,u.S,u.g)),l.ob(9,49152,null,0,i.m,[l.h,l.k,l.x],null,null),(n()(),l.pb(10,0,null,0,2,"ion-card-subtitle",[],null,null,null,u.T,u.h)),l.ob(11,49152,null,0,i.n,[l.h,l.k,l.x],null,null),(n()(),l.Ib(12,0,["",""]))],(function(n,t){n(t,1,0,"4","2","3");var e=n(t,5,0,"/books/summary/"+t.context.$implicit._id);n(t,4,0,e),n(t,6,0)}),(function(n,t){n(t,7,0,t.context.$implicit.cover||"../../assets/book_default.jpg"),n(t,12,0,t.context.$implicit.name)}))}function Zt(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,18,"ion-header",[],null,null,null,u.bb,u.o)),l.ob(1,49152,null,0,i.z,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,14,"ion-toolbar",[],null,null,null,u.zb,u.M)),l.ob(3,49152,null,0,i.xb,[l.h,l.k,l.x],null,null),(n()(),l.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,u.Q,u.d)),l.ob(5,49152,null,0,i.j,[l.h,l.k,l.x],null,null),(n()(),l.pb(6,0,null,0,1,"ion-menu-button",[["autoHide","false"]],null,null,null,u.kb,u.y)),l.ob(7,49152,null,0,i.P,[l.h,l.k,l.x],{autoHide:[0,"autoHide"]},null),(n()(),l.pb(8,0,null,0,2,"ion-title",[],null,null,null,u.yb,u.L)),l.ob(9,49152,null,0,i.vb,[l.h,l.k,l.x],null,null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u5217\u8868"])),(n()(),l.pb(11,0,null,0,5,"ion-buttons",[["slot","primary"]],null,null,null,u.Q,u.d)),l.ob(12,49152,null,0,i.j,[l.h,l.k,l.x],null,null),(n()(),l.pb(13,0,null,0,3,"ion-button",[["color","secondary"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.showSearchToggle()&&l),l}),u.P,u.c)),l.ob(14,49152,null,0,i.i,[l.h,l.k,l.x],{color:[0,"color"]},null),(n()(),l.pb(15,0,null,0,1,"ion-icon",[["name","search"],["slot","icon-only"]],null,null,null,u.cb,u.p)),l.ob(16,49152,null,0,i.A,[l.h,l.k,l.x],{name:[0,"name"]},null),(n()(),l.eb(16777216,null,0,1,null,Qt)),l.ob(18,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.pb(19,0,null,null,11,"ion-content",[],null,null,null,u.X,u.k)),l.ob(20,49152,null,0,i.s,[l.h,l.k,l.x],null,null),(n()(),l.pb(21,0,null,0,5,"ion-grid",[],null,null,null,u.ab,u.n)),l.ob(22,49152,null,0,i.y,[l.h,l.k,l.x],null,null),(n()(),l.pb(23,0,null,0,3,"ion-row",[],null,null,null,u.qb,u.D)),l.ob(24,49152,null,0,i.eb,[l.h,l.k,l.x],null,null),(n()(),l.eb(16777216,null,0,1,null,Yt)),l.ob(26,278528,null,0,c.i,[l.M,l.J,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l.pb(27,0,null,0,3,"ion-infinite-scroll",[["threshold","100px"]],null,[[null,"ionInfinite"]],(function(n,t,e){var l=!0;return"ionInfinite"===t&&(l=!1!==n.component.loadData(e)&&l),l}),u.eb,u.q)),l.ob(28,49152,null,0,i.C,[l.h,l.k,l.x],{threshold:[0,"threshold"]},null),(n()(),l.pb(29,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"],["loadingText","Loading more data..."]],null,null,null,u.db,u.r)),l.ob(30,49152,null,0,i.D,[l.h,l.k,l.x],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null)],(function(n,t){var e=t.component;n(t,7,0,"false"),n(t,14,0,"secondary"),n(t,16,0,"search"),n(t,18,0,e.searchBarShow),n(t,26,0,e.books),n(t,28,0,"100px"),n(t,30,0,"bubbles","Loading more data...")}),null)}function Xt(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,1,"app-books",[],null,null,null,Zt,Gt)),l.ob(1,114688,null,0,$t,[p,s.a,Jt,s.m],null,null)],(function(n,t){n(t,1,0)}),null)}var ne=l.lb("app-books",$t,Xt,{},{},[]),te=e("eIep");class ee{constructor(n,t,e,l,r,o){this.route=n,this.router=t,this.bookService=e,this.titleService=l,this.metaService=r,this.platformId=o}ngOnInit(){this.getBookById()}getBookById(){this.book$=this.route.paramMap.pipe(Object(te.a)(n=>this.bookService.getBookById(n.get("id")))),this.book$.subscribe(n=>{this.titleService.setTitle(n.name),this.metaService.updateTag({name:"description",content:n.name});let t=this.metaService.getTag('name= "keywords"')&&this.metaService.getTag('name= "keywords"').content||"\u521b\u65b0\u65b9\u6cd5,\u521b\u65b0\u9a7f\u7ad9,\u521b\u65b0\u9a7f\u8def,\u521b\u65b0\u4e8b\u4ef6,\u521b\u65b0,\u521b\u65b0\u7684\u4e8b\u60c5,\u521b\u65b0\u65b9\u6cd5\u8bba,";t+=n.tags.join(","),this.metaService.updateTag({name:"keywords",content:t})})}}var le=e("cUpR"),re=l.nb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]{font-family:FZLanTingHei-qianhei,FZLanTingHeiS-R-GB,Microsoft YaHei,verdana,arial,helvetica,sans-serif;font-size:14px;line-height:2rem}"]],data:{}});function oe(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,9,"ion-toolbar",[],null,null,null,u.zb,u.M)),l.ob(1,49152,null,0,i.xb,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,u.Q,u.d)),l.ob(3,49152,null,0,i.j,[l.h,l.k,l.x],null,null),(n()(),l.pb(4,0,null,0,2,"ion-back-button",[["defaultHref",""]],null,[[null,"click"]],(function(n,t,e){var r=!0;return"click"===t&&(r=!1!==l.Bb(n,6).onClick(e)&&r),r}),u.O,u.b)),l.ob(5,49152,null,0,i.e,[l.h,l.k,l.x],{defaultHref:[0,"defaultHref"]},null),l.ob(6,16384,null,0,i.f,[[2,i.db],i.Cb],{defaultHref:[0,"defaultHref"]},null),(n()(),l.pb(7,0,null,0,2,"ion-title",[],null,null,null,u.yb,u.L)),l.ob(8,49152,null,0,i.vb,[l.h,l.k,l.x],null,null),(n()(),l.Ib(9,0,["",""]))],(function(n,t){n(t,5,0,""),n(t,6,0,"")}),(function(n,t){n(t,9,0,t.context.ngIf.name)}))}function ue(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,35,"ion-grid",[],null,null,null,u.ab,u.n)),l.ob(1,49152,null,0,i.y,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,23,"ion-row",[],null,null,null,u.qb,u.D)),l.ob(3,49152,null,0,i.eb,[l.h,l.k,l.x],null,null),(n()(),l.pb(4,0,null,0,21,"ion-col",[],null,null,null,u.W,u.j)),l.ob(5,49152,null,0,i.r,[l.h,l.k,l.x],null,null),(n()(),l.pb(6,0,null,0,19,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(7,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(8,0,null,0,2,"ion-thumbnail",[["slot","start"]],null,null,null,u.xb,u.K)),l.ob(9,49152,null,0,i.ub,[l.h,l.k,l.x],null,null),(n()(),l.pb(10,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),l.pb(11,0,null,0,14,"ion-label",[],null,null,null,u.hb,u.u)),l.ob(12,49152,null,0,i.L,[l.h,l.k,l.x],null,null),(n()(),l.pb(13,0,null,0,1,"h3",[],null,null,null,null,null)),(n()(),l.Ib(14,null,["",""])),(n()(),l.pb(15,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),l.Ib(16,null,["\u4f5c\u8005: ",""])),(n()(),l.pb(17,0,null,0,8,"p",[],null,null,null,null,null)),(n()(),l.pb(18,0,null,null,7,"ion-button",[],null,[[null,"click"]],(function(n,t,e){var r=!0;return"click"===t&&(r=!1!==l.Bb(n,20).onClick()&&r),"click"===t&&(r=!1!==l.Bb(n,22).onClick(e)&&r),r}),u.P,u.c)),l.ob(19,49152,null,0,i.i,[l.h,l.k,l.x],null,null),l.ob(20,16384,null,0,s.n,[s.m,s.a,[8,null],l.B,l.k],{routerLink:[0,"routerLink"]},null),l.Cb(21,1),l.ob(22,737280,null,0,i.Fb,[c.h,i.Cb,l.k,s.m,[2,s.n]],null,null),(n()(),l.pb(23,0,null,0,1,"ion-icon",[["name","eye-outline"]],null,null,null,u.cb,u.p)),l.ob(24,49152,null,0,i.A,[l.h,l.k,l.x],{name:[0,"name"]},null),(n()(),l.Ib(-1,0,["\u9605\u8bfb "])),(n()(),l.pb(26,0,null,0,9,"ion-row",[],null,null,null,u.qb,u.D)),l.ob(27,49152,null,0,i.eb,[l.h,l.k,l.x],null,null),(n()(),l.pb(28,0,null,0,7,"ion-col",[],null,null,null,u.W,u.j)),l.ob(29,49152,null,0,i.r,[l.h,l.k,l.x],null,null),(n()(),l.pb(30,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),l.Ib(-1,null,[" \u6458\u8981 | \u8bc4\u8bba "])),(n()(),l.pb(32,0,null,0,0,"app-commemoration-ad",[],null,null,null,null,null)),(n()(),l.pb(33,0,null,0,2,"ion-text",[],null,null,null,u.vb,u.I)),l.ob(34,49152,null,0,i.sb,[l.h,l.k,l.x],null,null),(n()(),l.Ib(35,0,[" "," "]))],(function(n,t){var e=n(t,21,0,"/books/"+t.context.ngIf._id);n(t,20,0,e),n(t,22,0),n(t,24,0,"eye-outline")}),(function(n,t){n(t,10,0,t.context.ngIf.cover||"../../../assets/book_default.jpg"),n(t,14,0,t.context.ngIf.name),n(t,16,0,t.context.ngIf.author),n(t,35,0,t.context.ngIf.abstract)}))}function ie(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,4,"ion-header",[],null,null,null,u.bb,u.o)),l.ob(1,49152,null,0,i.z,[l.h,l.k,l.x],null,null),(n()(),l.eb(16777216,null,0,2,null,oe)),l.ob(3,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),l.Db(131072,c.b,[l.h]),(n()(),l.pb(5,0,null,null,5,"ion-content",[],null,null,null,u.X,u.k)),l.ob(6,49152,null,0,i.s,[l.h,l.k,l.x],null,null),(n()(),l.eb(16777216,null,0,2,null,ue)),l.ob(8,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),l.Db(131072,c.b,[l.h]),(n()(),l.pb(10,0,null,0,0,"app-commemoration-ad",[],null,null,null,null,null))],(function(n,t){var e=t.component;n(t,3,0,l.Jb(t,3,0,l.Bb(t,4).transform(e.book$))),n(t,8,0,l.Jb(t,8,0,l.Bb(t,9).transform(e.book$)))}),null)}function ae(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,1,"app-books-summary",[],null,null,null,ie,re)),l.ob(1,114688,null,0,ee,[s.a,s.m,p,le.i,le.h,l.z],null,null)],(function(n,t){n(t,1,0)}),null)}var se=l.lb("app-books-summary",ee,ae,{},{},[]),ce=e("LRne"),he=e("4DkL");class fe{constructor(n,t,e,l,r){this.fb=n,this.bookService=t,this.router=e,this.route=l,this.cfgService=r,this.bookForm=this.fb.group({_id:[""],name:["",a.m.required],content:["",a.m.required],bookType:["\u5176\u4ed6",a.m.required],tags:[[]],cover:[""],author:[""],abstract:["",a.m.required]}),this.validateFlag=!1}ngOnInit(){this.getBookById(),this.getBookType(),this.getBookTag()}getBookType(){this.cfgService.getCfgList({key:"ARTICLE_TYPE"}).subscribe(n=>{this.bookTypes=JSON.parse(n[0].valu)})}getBookTag(){this.cfgService.getCfgList({key:"ARTICLE_TAG"}).subscribe(n=>{this.bookTags=JSON.parse(n[0].valu)})}onSubmit(){this.bookForm.value._id&&""!=this.bookForm.value._id?this.bookService.updateBook(this.bookForm.value,this.bookForm.value._id).subscribe(n=>{this.validateFlag=!0,this.router.navigate([`/books/${n._id}`])}):(delete this.bookForm.value._id,this.bookService.createBook(this.bookForm.value).subscribe(n=>{this.validateFlag=!0,this.router.navigate([`/books/${n._id}`])}))}getBookById(){let n=this.route.snapshot.paramMap.get("id");n&&this.bookService.getBookById(n).subscribe(n=>{this.bookForm.patchValue({_id:n._id,name:n.name,content:"\u5185\u5bb9\u4e0d\u5141\u8bb8\u66f4\u6539\uff0c\u66f4\u6539\u65e0\u6548",bookType:n.bookType,tags:n.tags,cover:n.cover,author:n.author,abstract:n.abstract})})}fileUpload(n){if(-1==n[0].name.indexOf(".txt"))return void alert("\u76ee\u524d\u53ea\u652f\u6301txt\u683c\u5f0f\u6587\u4ef6\uff0c\u5176\u4ed6\u683c\u5f0f\u656c\u8bf7\u671f\u5f85");let t=this,e=new FileReader;const l=new Blob(n,{type:"text/plain"});e.onload=function(){t.bookForm.patchValue({content:this.result}),""==t.bookForm.value.name&&t.bookForm.patchValue({name:n[0].name}),""==t.bookForm.value.abstract&&t.bookForm.patchValue({abstract:this.result.toString().substring(0,200)})},e.readAsText(l,"GB2312")}canDeactivate(){if(!this.bookForm.dirty||this.validateFlag)return!0;const n=window.confirm("\u60a8\u7684\u6570\u636e\u8fd8\u672a\u4fdd\u5b58\uff0c\u662f\u5426\u53d6\u6d88\u4fdd\u5b58?");return Object(ce.a)(n)}}var be=l.nb({encapsulation:0,styles:[[""]],data:{}});function de(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,2,"ion-select-option",[],null,null,null,u.sb,u.G)),l.ob(1,49152,null,0,i.jb,[l.h,l.k,l.x],{value:[0,"value"]},null),(n()(),l.Ib(2,0,["",""]))],(function(n,t){n(t,1,0,l.tb(1,"",t.context.$implicit,""))}),(function(n,t){n(t,2,0,t.context.$implicit)}))}function pe(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,2,"ion-select-option",[],null,null,null,u.sb,u.G)),l.ob(1,49152,null,0,i.jb,[l.h,l.k,l.x],{value:[0,"value"]},null),(n()(),l.Ib(2,0,["",""]))],(function(n,t){n(t,1,0,l.tb(1,"",t.context.$implicit,""))}),(function(n,t){n(t,2,0,t.context.$implicit)}))}function ge(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,11,"ion-header",[],null,null,null,u.bb,u.o)),l.ob(1,49152,null,0,i.z,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,9,"ion-toolbar",[],null,null,null,u.zb,u.M)),l.ob(3,49152,null,0,i.xb,[l.h,l.k,l.x],null,null),(n()(),l.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,u.Q,u.d)),l.ob(5,49152,null,0,i.j,[l.h,l.k,l.x],null,null),(n()(),l.pb(6,0,null,0,2,"ion-back-button",[["defaultHref",""]],null,[[null,"click"]],(function(n,t,e){var r=!0;return"click"===t&&(r=!1!==l.Bb(n,8).onClick(e)&&r),r}),u.O,u.b)),l.ob(7,49152,null,0,i.e,[l.h,l.k,l.x],{defaultHref:[0,"defaultHref"]},null),l.ob(8,16384,null,0,i.f,[[2,i.db],i.Cb],{defaultHref:[0,"defaultHref"]},null),(n()(),l.pb(9,0,null,0,2,"ion-title",[],null,null,null,u.yb,u.L)),l.ob(10,49152,null,0,i.vb,[l.h,l.k,l.x],null,null),(n()(),l.Ib(-1,0,["\u65b0\u589e\u4e66\u7c4d"])),(n()(),l.pb(12,0,null,null,119,"ion-content",[],null,null,null,u.X,u.k)),l.ob(13,49152,null,0,i.s,[l.h,l.k,l.x],null,null),(n()(),l.pb(14,0,null,0,111,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,t,e){var r=!0;return"submit"===t&&(r=!1!==l.Bb(n,16).onSubmit(e)&&r),"reset"===t&&(r=!1!==l.Bb(n,16).onReset()&&r),r}),null,null)),l.ob(15,16384,null,0,a.q,[],null,null),l.ob(16,540672,null,0,a.d,[[8,null],[8,null]],{form:[0,"form"]},null),l.Fb(2048,null,a.a,null,[a.d]),l.ob(18,16384,null,0,a.j,[[4,a.a]],null,null),(n()(),l.pb(19,0,null,null,13,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(20,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(21,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,u.hb,u.u)),l.ob(22,49152,null,0,i.L,[l.h,l.k,l.x],{position:[0,"position"]},null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u540d\u79f0*"])),(n()(),l.pb(24,0,null,0,8,"ion-input",[["formControlName","name"],["required","true"],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,t,e){var r=!0;return"ionBlur"===t&&(r=!1!==l.Bb(n,27)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,27)._handleInputEvent(e.target)&&r),r}),u.fb,u.s)),l.ob(25,16384,null,0,a.l,[],{required:[0,"required"]},null),l.Fb(1024,null,a.f,(function(n){return[n]}),[a.l]),l.ob(27,16384,null,0,i.Hb,[l.k],null,null),l.Fb(1024,null,a.g,(function(n){return[n]}),[i.Hb]),l.ob(29,671744,null,0,a.c,[[3,a.a],[6,a.f],[8,null],[6,a.g],[2,a.p]],{name:[0,"name"]},null),l.Fb(2048,null,a.h,null,[a.c]),l.ob(31,16384,null,0,a.i,[[4,a.h]],null,null),l.ob(32,49152,null,0,i.E,[l.h,l.k,l.x],{required:[0,"required"],type:[1,"type"]},null),(n()(),l.pb(33,0,null,null,15,"ion-row",[],null,null,null,u.qb,u.D)),l.ob(34,49152,null,0,i.eb,[l.h,l.k,l.x],null,null),(n()(),l.pb(35,0,null,0,13,"ion-col",[],null,null,null,u.W,u.j)),l.ob(36,49152,null,0,i.r,[l.h,l.k,l.x],null,null),(n()(),l.pb(37,0,null,0,11,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(38,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(39,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,u.hb,u.u)),l.ob(40,49152,null,0,i.L,[l.h,l.k,l.x],{position:[0,"position"]},null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u4f5c\u8005"])),(n()(),l.pb(42,0,null,0,6,"ion-input",[["formControlName","author"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,t,e){var r=!0;return"ionBlur"===t&&(r=!1!==l.Bb(n,43)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,43)._handleInputEvent(e.target)&&r),r}),u.fb,u.s)),l.ob(43,16384,null,0,i.Hb,[l.k],null,null),l.Fb(1024,null,a.g,(function(n){return[n]}),[i.Hb]),l.ob(45,671744,null,0,a.c,[[3,a.a],[8,null],[8,null],[6,a.g],[2,a.p]],{name:[0,"name"]},null),l.Fb(2048,null,a.h,null,[a.c]),l.ob(47,16384,null,0,a.i,[[4,a.h]],null,null),l.ob(48,49152,null,0,i.E,[l.h,l.k,l.x],{type:[0,"type"]},null),(n()(),l.pb(49,0,null,null,13,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(50,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(51,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,u.hb,u.u)),l.ob(52,49152,null,0,i.L,[l.h,l.k,l.x],{position:[0,"position"]},null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u4ecb\u7ecd*"])),(n()(),l.pb(54,0,null,0,8,"ion-textarea",[["formControlName","abstract"],["required","true"],["rows","5"],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,t,e){var r=!0;return"ionBlur"===t&&(r=!1!==l.Bb(n,57)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,57)._handleInputEvent(e.target)&&r),r}),u.wb,u.J)),l.ob(55,16384,null,0,a.l,[],{required:[0,"required"]},null),l.Fb(1024,null,a.f,(function(n){return[n]}),[a.l]),l.ob(57,16384,null,0,i.Hb,[l.k],null,null),l.Fb(1024,null,a.g,(function(n){return[n]}),[i.Hb]),l.ob(59,671744,null,0,a.c,[[3,a.a],[6,a.f],[8,null],[6,a.g],[2,a.p]],{name:[0,"name"]},null),l.Fb(2048,null,a.h,null,[a.c]),l.ob(61,16384,null,0,a.i,[[4,a.h]],null,null),l.ob(62,49152,null,0,i.tb,[l.h,l.k,l.x],{required:[0,"required"],rows:[1,"rows"]},null),(n()(),l.pb(63,0,null,null,33,"ion-row",[],null,null,null,u.qb,u.D)),l.ob(64,49152,null,0,i.eb,[l.h,l.k,l.x],null,null),(n()(),l.pb(65,0,null,0,15,"ion-col",[["size","6"]],null,null,null,u.W,u.j)),l.ob(66,49152,null,0,i.r,[l.h,l.k,l.x],{size:[0,"size"]},null),(n()(),l.pb(67,0,null,0,13,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(68,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(69,0,null,0,2,"ion-label",[],null,null,null,u.hb,u.u)),l.ob(70,49152,null,0,i.L,[l.h,l.k,l.x],null,null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u7c7b\u578b*"])),(n()(),l.pb(72,0,null,0,8,"ion-select",[["formControlName","bookType"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,t,e){var r=!0;return"ionBlur"===t&&(r=!1!==l.Bb(n,73)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,73)._handleChangeEvent(e.target)&&r),r}),u.tb,u.F)),l.ob(73,16384,null,0,i.Gb,[l.k],null,null),l.Fb(1024,null,a.g,(function(n){return[n]}),[i.Gb]),l.ob(75,671744,null,0,a.c,[[3,a.a],[8,null],[8,null],[6,a.g],[2,a.p]],{name:[0,"name"]},null),l.Fb(2048,null,a.h,null,[a.c]),l.ob(77,16384,null,0,a.i,[[4,a.h]],null,null),l.ob(78,49152,null,0,i.ib,[l.h,l.k,l.x],null,null),(n()(),l.eb(16777216,null,0,1,null,de)),l.ob(80,278528,null,0,c.i,[l.M,l.J,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l.pb(81,0,null,0,15,"ion-col",[["size","6"]],null,null,null,u.W,u.j)),l.ob(82,49152,null,0,i.r,[l.h,l.k,l.x],{size:[0,"size"]},null),(n()(),l.pb(83,0,null,0,13,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(84,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(85,0,null,0,2,"ion-label",[],null,null,null,u.hb,u.u)),l.ob(86,49152,null,0,i.L,[l.h,l.k,l.x],null,null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u7684\u6807\u7b7e"])),(n()(),l.pb(88,0,null,0,8,"ion-select",[["formControlName","tags"],["multiple","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,t,e){var r=!0;return"ionBlur"===t&&(r=!1!==l.Bb(n,89)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,89)._handleChangeEvent(e.target)&&r),r}),u.tb,u.F)),l.ob(89,16384,null,0,i.Gb,[l.k],null,null),l.Fb(1024,null,a.g,(function(n){return[n]}),[i.Gb]),l.ob(91,671744,null,0,a.c,[[3,a.a],[8,null],[8,null],[6,a.g],[2,a.p]],{name:[0,"name"]},null),l.Fb(2048,null,a.h,null,[a.c]),l.ob(93,16384,null,0,a.i,[[4,a.h]],null,null),l.ob(94,49152,null,0,i.ib,[l.h,l.k,l.x],{multiple:[0,"multiple"]},null),(n()(),l.eb(16777216,null,0,1,null,pe)),l.ob(96,278528,null,0,c.i,[l.M,l.J,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l.pb(97,0,null,null,11,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(98,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(99,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,u.hb,u.u)),l.ob(100,49152,null,0,i.L,[l.h,l.k,l.x],{position:[0,"position"]},null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u5c01\u9762\u5730\u5740"])),(n()(),l.pb(102,0,null,0,6,"ion-input",[["formControlName","cover"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,t,e){var r=!0;return"ionBlur"===t&&(r=!1!==l.Bb(n,103)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,103)._handleInputEvent(e.target)&&r),r}),u.fb,u.s)),l.ob(103,16384,null,0,i.Hb,[l.k],null,null),l.Fb(1024,null,a.g,(function(n){return[n]}),[i.Hb]),l.ob(105,671744,null,0,a.c,[[3,a.a],[8,null],[8,null],[6,a.g],[2,a.p]],{name:[0,"name"]},null),l.Fb(2048,null,a.h,null,[a.c]),l.ob(107,16384,null,0,a.i,[[4,a.h]],null,null),l.ob(108,49152,null,0,i.E,[l.h,l.k,l.x],{type:[0,"type"]},null),(n()(),l.pb(109,0,null,null,13,"ion-item",[],null,null,null,u.gb,u.t)),l.ob(110,49152,null,0,i.F,[l.h,l.k,l.x],null,null),(n()(),l.pb(111,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,u.hb,u.u)),l.ob(112,49152,null,0,i.L,[l.h,l.k,l.x],{position:[0,"position"]},null),(n()(),l.Ib(-1,0,["\u4e66\u7c4d\u5185\u5bb9*"])),(n()(),l.pb(114,0,null,0,8,"ion-textarea",[["formControlName","content"],["required","true"],["rows","10"],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,t,e){var r=!0;return"ionBlur"===t&&(r=!1!==l.Bb(n,117)._handleBlurEvent(e.target)&&r),"ionChange"===t&&(r=!1!==l.Bb(n,117)._handleInputEvent(e.target)&&r),r}),u.wb,u.J)),l.ob(115,16384,null,0,a.l,[],{required:[0,"required"]},null),l.Fb(1024,null,a.f,(function(n){return[n]}),[a.l]),l.ob(117,16384,null,0,i.Hb,[l.k],null,null),l.Fb(1024,null,a.g,(function(n){return[n]}),[i.Hb]),l.ob(119,671744,null,0,a.c,[[3,a.a],[6,a.f],[8,null],[6,a.g],[2,a.p]],{name:[0,"name"]},null),l.Fb(2048,null,a.h,null,[a.c]),l.ob(121,16384,null,0,a.i,[[4,a.h]],null,null),l.ob(122,49152,null,0,i.tb,[l.h,l.k,l.x],{required:[0,"required"],rows:[1,"rows"]},null),(n()(),l.pb(123,0,null,null,2,"ion-button",[["class","padding"],["color","tertiary"],["expand","block"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onSubmit()&&l),l}),u.P,u.c)),l.ob(124,49152,null,0,i.i,[l.h,l.k,l.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"]},null),(n()(),l.Ib(-1,0,["\u63d0\u4ea4"])),(n()(),l.pb(126,0,null,0,5,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,null,null,u.Z,u.l)),l.ob(127,49152,null,0,i.u,[l.h,l.k,l.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),l.pb(128,0,null,0,3,"ion-fab-button",[],null,null,null,u.Y,u.m)),l.ob(129,49152,null,0,i.v,[l.h,l.k,l.x],null,null),(n()(),l.pb(130,0,null,0,1,"ion-icon",[["name","add"]],null,null,null,u.cb,u.p)),l.ob(131,49152,null,0,i.A,[l.h,l.k,l.x],{name:[0,"name"]},null),(n()(),l.pb(132,0,null,null,1,"button",[["style","right:60px; bottom:60px;position: fixed; z-index: 9999"]],null,null,null,null,null)),(n()(),l.pb(133,0,null,null,0,"input",[["id","form_file"],["style","position: absolute;left: 0;top: 0;width: 56px;height: 56px;opacity: 0"],["type","file"]],null,[[null,"change"]],(function(n,t,e){var l=!0;return"change"===t&&(l=!1!==n.component.fileUpload(e.target.files)&&l),l}),null,null))],(function(n,t){var e=t.component;n(t,7,0,""),n(t,8,0,""),n(t,16,0,e.bookForm),n(t,22,0,"floating"),n(t,25,0,"true"),n(t,29,0,"name"),n(t,32,0,"true","text"),n(t,40,0,"floating"),n(t,45,0,"author"),n(t,48,0,"text"),n(t,52,0,"floating"),n(t,55,0,"true"),n(t,59,0,"abstract"),n(t,62,0,"true","5"),n(t,66,0,"6"),n(t,75,0,"bookType"),n(t,80,0,e.bookTypes),n(t,82,0,"6"),n(t,91,0,"tags"),n(t,94,0,"true"),n(t,96,0,e.bookTags),n(t,100,0,"floating"),n(t,105,0,"cover"),n(t,108,0,"text"),n(t,112,0,"floating"),n(t,115,0,"true"),n(t,119,0,"content"),n(t,122,0,"true","10"),n(t,124,0,"tertiary",!e.bookForm.valid,"block"),n(t,127,0,"end","bottom"),n(t,131,0,"add")}),(function(n,t){n(t,14,0,l.Bb(t,18).ngClassUntouched,l.Bb(t,18).ngClassTouched,l.Bb(t,18).ngClassPristine,l.Bb(t,18).ngClassDirty,l.Bb(t,18).ngClassValid,l.Bb(t,18).ngClassInvalid,l.Bb(t,18).ngClassPending),n(t,24,0,l.Bb(t,25).required?"":null,l.Bb(t,31).ngClassUntouched,l.Bb(t,31).ngClassTouched,l.Bb(t,31).ngClassPristine,l.Bb(t,31).ngClassDirty,l.Bb(t,31).ngClassValid,l.Bb(t,31).ngClassInvalid,l.Bb(t,31).ngClassPending),n(t,42,0,l.Bb(t,47).ngClassUntouched,l.Bb(t,47).ngClassTouched,l.Bb(t,47).ngClassPristine,l.Bb(t,47).ngClassDirty,l.Bb(t,47).ngClassValid,l.Bb(t,47).ngClassInvalid,l.Bb(t,47).ngClassPending),n(t,54,0,l.Bb(t,55).required?"":null,l.Bb(t,61).ngClassUntouched,l.Bb(t,61).ngClassTouched,l.Bb(t,61).ngClassPristine,l.Bb(t,61).ngClassDirty,l.Bb(t,61).ngClassValid,l.Bb(t,61).ngClassInvalid,l.Bb(t,61).ngClassPending),n(t,72,0,l.Bb(t,77).ngClassUntouched,l.Bb(t,77).ngClassTouched,l.Bb(t,77).ngClassPristine,l.Bb(t,77).ngClassDirty,l.Bb(t,77).ngClassValid,l.Bb(t,77).ngClassInvalid,l.Bb(t,77).ngClassPending),n(t,88,0,l.Bb(t,93).ngClassUntouched,l.Bb(t,93).ngClassTouched,l.Bb(t,93).ngClassPristine,l.Bb(t,93).ngClassDirty,l.Bb(t,93).ngClassValid,l.Bb(t,93).ngClassInvalid,l.Bb(t,93).ngClassPending),n(t,102,0,l.Bb(t,107).ngClassUntouched,l.Bb(t,107).ngClassTouched,l.Bb(t,107).ngClassPristine,l.Bb(t,107).ngClassDirty,l.Bb(t,107).ngClassValid,l.Bb(t,107).ngClassInvalid,l.Bb(t,107).ngClassPending),n(t,114,0,l.Bb(t,115).required?"":null,l.Bb(t,121).ngClassUntouched,l.Bb(t,121).ngClassTouched,l.Bb(t,121).ngClassPristine,l.Bb(t,121).ngClassDirty,l.Bb(t,121).ngClassValid,l.Bb(t,121).ngClassInvalid,l.Bb(t,121).ngClassPending)}))}function ve(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,1,"app-books-form",[],null,null,null,ge,be)),l.ob(1,114688,null,0,fe,[a.b,p,s.m,s.a,he.a],null,null)],(function(n,t){n(t,1,0)}),null)}var me=l.lb("app-books-form",fe,ve,{},{},[]);class ye{constructor(n,t,e,l,r,o,u){this.route=n,this.router=t,this.bookService=e,this.titleService=l,this.metaService=r,this.bookFrontService=o,this.platformId=u,this.currentPage=1,this.blogId=""}ngOnInit(){this.blogId=this.route.snapshot.params.id,this.bookFrontService.getDetailByBookId(this.blogId).then(n=>{this.currentPage=n.current_page}).finally(()=>this.getBookById())}getBookById(n=function(n){}){this.bookService.getBookContentById({id:this.blogId,page:this.currentPage}).subscribe(t=>{this.book=t,this.bookFrontService.saveBookInfo({book_id:t._id,book_name:t.name,book_cover:t.cover,current_page:this.currentPage}),this.titleService.setTitle(t.name),this.metaService.updateTag({name:"description",content:t.name});let e=this.metaService.getTag('name= "keywords"')&&this.metaService.getTag('name= "keywords"').content||"\u5c0f\u8bf4,\u6210\u4eba,\u82f1\u6587,\u82f1\u6587\u539f\u8457,\u82f1\u6587\u5c0f\u8bf4,\u6210\u4eba\u5c0f\u8bf4,H\u6587,";e+=t.tags.join(","),this.metaService.updateTag({name:"keywords",content:e}),n(t)})}getPrePage(n){1!=this.currentPage&&(this.currentPage--,this.getBookById((function(t){n.target.complete()})))}getPrePageContent(){1!=this.currentPage&&(this.currentPage--,this.getBookById())}getNextPage(n){this.currentPage++;let t=this;setTimeout((function(){t.book.content="",t.getBookById((function(t){n.target.complete(),""==t.content&&(n.target.disabled=!0),document.querySelector("ion-content").scrollToTop(500)}))}),1e3)}getNextPageContent(){this.currentPage++,this.book.content="",this.getBookById((function(n){document.querySelector("ion-content").scrollToTop(500)}))}}var ke=l.nb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]{font-family:FZLanTingHei-qianhei,FZLanTingHeiS-R-GB,Microsoft YaHei,verdana,arial,helvetica,sans-serif;font-size:14px;line-height:2rem}ion-grid[_ngcontent-%COMP%]{background:#dce2f1}ion-text[_ngcontent-%COMP%]{white-space:pre-wrap}"]],data:{}});function we(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,8,"ion-grid",[],null,null,null,u.ab,u.n)),l.ob(1,49152,null,0,i.y,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,6,"ion-row",[],null,null,null,u.qb,u.D)),l.ob(3,49152,null,0,i.eb,[l.h,l.k,l.x],null,null),(n()(),l.pb(4,0,null,0,4,"ion-col",[],null,null,null,u.W,u.j)),l.ob(5,49152,null,0,i.r,[l.h,l.k,l.x],null,null),(n()(),l.pb(6,0,null,0,2,"ion-text",[],null,null,null,u.vb,u.I)),l.ob(7,49152,null,0,i.sb,[l.h,l.k,l.x],null,null),(n()(),l.Ib(8,0,[" "," "]))],null,(function(n,t){var e=t.component;n(t,8,0,e.book&&e.book.content)}))}function xe(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,11,"ion-header",[],null,null,null,u.bb,u.o)),l.ob(1,49152,null,0,i.z,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,9,"ion-toolbar",[],null,null,null,u.zb,u.M)),l.ob(3,49152,null,0,i.xb,[l.h,l.k,l.x],null,null),(n()(),l.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,u.Q,u.d)),l.ob(5,49152,null,0,i.j,[l.h,l.k,l.x],null,null),(n()(),l.pb(6,0,null,0,2,"ion-back-button",[["defaultHref",""]],null,[[null,"click"]],(function(n,t,e){var r=!0;return"click"===t&&(r=!1!==l.Bb(n,8).onClick(e)&&r),r}),u.O,u.b)),l.ob(7,49152,null,0,i.e,[l.h,l.k,l.x],{defaultHref:[0,"defaultHref"]},null),l.ob(8,16384,null,0,i.f,[[2,i.db],i.Cb],{defaultHref:[0,"defaultHref"]},null),(n()(),l.pb(9,0,null,0,2,"ion-title",[],null,null,null,u.yb,u.L)),l.ob(10,49152,null,0,i.vb,[l.h,l.k,l.x],null,null),(n()(),l.Ib(11,0,["",""])),(n()(),l.pb(12,0,null,null,23,"ion-content",[],null,null,null,u.X,u.k)),l.ob(13,49152,null,0,i.s,[l.h,l.k,l.x],null,null),(n()(),l.pb(14,0,null,0,3,"ion-refresher",[["slot","fixed"]],null,[[null,"ionRefresh"]],(function(n,t,e){var l=!0;return"ionRefresh"===t&&(l=!1!==n.component.getPrePage(e)&&l),l}),u.pb,u.B)),l.ob(15,49152,null,0,i.Y,[l.h,l.k,l.x],null,null),(n()(),l.pb(16,0,null,0,1,"ion-refresher-content",[],null,null,null,u.ob,u.C)),l.ob(17,49152,null,0,i.Z,[l.h,l.k,l.x],null,null),(n()(),l.pb(18,0,null,0,0,"app-commemoration-ad",[],null,null,null,null,null)),(n()(),l.eb(16777216,null,0,1,null,we)),l.ob(20,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.pb(21,0,null,0,0,"img",[["src","../../../assets/book_rent.jpg"],["style","width: 100%"]],null,null,null,null,null)),(n()(),l.pb(22,0,null,0,0,"app-commemoration-ad",[],null,null,null,null,null)),(n()(),l.pb(23,0,null,0,11,"ion-row",[],null,null,null,u.qb,u.D)),l.ob(24,49152,null,0,i.eb,[l.h,l.k,l.x],null,null),(n()(),l.pb(25,0,null,0,4,"ion-col",[["style","text-align: center;"]],null,null,null,u.W,u.j)),l.ob(26,49152,null,0,i.r,[l.h,l.k,l.x],null,null),(n()(),l.pb(27,0,null,0,2,"ion-button",[["color","secondary"],["size","small"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.getPrePageContent()&&l),l}),u.P,u.c)),l.ob(28,49152,null,0,i.i,[l.h,l.k,l.x],{color:[0,"color"],size:[1,"size"]},null),(n()(),l.Ib(-1,0,["\u4e0a\u4e00\u9875"])),(n()(),l.pb(30,0,null,0,4,"ion-col",[["style","text-align: center;"]],null,null,null,u.W,u.j)),l.ob(31,49152,null,0,i.r,[l.h,l.k,l.x],null,null),(n()(),l.pb(32,0,null,0,2,"ion-button",[["color","primary"],["size","small"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.getNextPageContent()&&l),l}),u.P,u.c)),l.ob(33,49152,null,0,i.i,[l.h,l.k,l.x],{color:[0,"color"],size:[1,"size"]},null),(n()(),l.Ib(-1,0,["\u4e0b\u4e00\u9875"])),(n()(),l.pb(35,0,null,0,0,"app-commemoration-ad",[],null,null,null,null,null))],(function(n,t){var e=t.component;n(t,7,0,""),n(t,8,0,""),n(t,20,0,e.book),n(t,28,0,"secondary","small"),n(t,33,0,"primary","small")}),(function(n,t){var e=t.component;n(t,11,0,e.book&&e.book.name)}))}function _e(n){return l.Kb(0,[(n()(),l.pb(0,0,null,null,1,"app-books-detail",[],null,null,null,xe,ke)),l.ob(1,114688,null,0,ye,[s.a,s.m,p,le.i,le.h,Jt,l.z],null,null)],(function(n,t){n(t,1,0)}),null)}var Be=l.lb("app-books-detail",ye,_e,{},{},[]);class Ce{}e.d(t,"BooksPageModuleNgFactory",(function(){return Ie}));var Ie=l.mb(r,[],(function(n){return l.yb([l.zb(512,l.j,l.X,[[8,[o.a,ne,se,me,Be]],[3,l.j],l.v]),l.zb(4608,c.l,c.k,[l.s,[2,c.r]]),l.zb(4608,a.o,a.o,[]),l.zb(4608,i.a,i.a,[l.x,l.g]),l.zb(4608,i.Bb,i.Bb,[i.a,l.j,l.p]),l.zb(4608,i.Eb,i.Eb,[i.a,l.j,l.p]),l.zb(4608,a.b,a.b,[]),l.zb(4608,f.a,f.a,[l.z,l.c,d.c,l.x,i.Ib]),l.zb(4608,p,p,[f.a]),l.zb(1073742336,c.c,c.c,[]),l.zb(1073742336,a.n,a.n,[]),l.zb(1073742336,a.e,a.e,[]),l.zb(1073742336,i.zb,i.zb,[]),l.zb(1073742336,a.k,a.k,[]),l.zb(1073742336,s.p,s.p,[[2,s.u],[2,s.m]]),l.zb(1073742336,Ce,Ce,[]),l.zb(1073742336,r,r,[]),l.zb(1024,s.k,(function(){return[[{path:"",component:$t},{path:"summary/:id",component:ee},{path:"new",component:fe},{path:"edit/:id",component:fe},{path:":id",component:ye}]]}),[])])}))}}]);